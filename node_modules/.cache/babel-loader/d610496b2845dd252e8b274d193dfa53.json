{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport PlayList from './PlayList.js';\nimport SearchBar from './SearchBar.js';\nimport SelectBar from './SelectBar.js';\n\nvar schedule = require('./schedule.json');\n\nvar nba = require('nba-pbp-video');\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.getPBP = function (gameID) {\n      var options = {\n        formatted: true,\n        parameters: false\n      };\n      document.getElementsByTagName('select')[0].selectedIndex = 0;\n\n      _this.setState({\n        title: ''\n      });\n\n      _this.setState({\n        URL: ''\n      });\n\n      nba.playByPlay({\n        GameID: gameID\n      }, options).then(function (data) {\n        console.log(data);\n        if (data.AvailableVideo.VIDEO_AVAILABLE_FLAG === 1 || data.AvailableVideo.VIDEO_AVAILABLE_FLAG === 2) _this.parsePBP(data);else _this.setState({\n          pbp: []\n        });\n      });\n    };\n\n    _this.parsePBP = function (data) {\n      var plays = [];\n      var playsDeepCopy = [];\n      var playersList = [];\n      var temp = [];\n      plays = _this.filterPlays(data.PlayByPlay);\n\n      for (var i = 1; i < plays.length; i++) {\n        if (!plays[i].Description) {\n          if (plays[i].HOMEDESCRIPTION && plays[i].VISITORDESCRIPTION) {\n            plays[i].Description = plays[i].HOMEDESCRIPTION;\n            playsDeepCopy[i] = JSON.parse(JSON.stringify(plays[i]));\n            playsDeepCopy[i].Description = plays[i].VISITORDESCRIPTION;\n            plays.splice(i, 0, playsDeepCopy[i]);\n          } else {\n            plays[i].Description = plays[i].HOMEDESCRIPTION ? plays[i].HOMEDESCRIPTION : plays[i].VISITORDESCRIPTION;\n          }\n\n          if (plays[i].PLAYER1_NAME) temp.push(plays[i].PLAYER1_NAME);\n          if (plays[i].PLAYER2_NAME) temp.push(plays[i].PLAYER2_NAME);\n          if (plays[i].PLAYER3_NAME) temp.push(plays[i].PLAYER3_NAME);\n        }\n      }\n\n      console.log(plays);\n      playersList = _toConsumableArray(new Set(temp));\n      document.getElementsByTagName('select')[1].selectedIndex = 0;\n      _this.selectedPlayer = \"\";\n      _this.allPBP = plays;\n      _this.playerPBP = plays;\n\n      _this.setState({\n        pbp: plays\n      });\n\n      _this.setState({\n        players: playersList\n      }); //this.setState({pbp: [...this.state.pbp, plays]})\n\n    };\n\n    _this.filterPlays = function (data) {\n      //removing free throws (3), timeouts (9), and subs (8)\n      var key,\n          filteredData = [];\n\n      for (key in data) {\n        if (!(data[key].EVENTMSGTYPE === 9 || data[key].EVENTMSGTYPE === 8 || data[key].EVENTMSGTYPE === 3)) {\n          filteredData.push(data[key]);\n        }\n      }\n\n      return filteredData;\n    };\n\n    _this.getVidURL = function (eventNum, gameID) {\n      nba.getPBPVideoURL({\n        EventNum: eventNum,\n        GameID: gameID\n      }).then(function (url) {\n        console.log(url);\n\n        _this.setState({\n          URL: url\n        });\n      });\n    };\n\n    _this.getSelectedVideoDetails = function (eventNum, title) {\n      _this.getVidURL(eventNum, _this.state.selectedGame.GameID);\n\n      _this.setState({\n        title: title\n      });\n    };\n\n    _this.getSelectedGame = function (game) {\n      _this.setState({\n        selectedGame: game\n      });\n\n      _this.getPBP(game.GameID);\n    };\n\n    _this.getSelectedPlayer = function (player) {\n      document.getElementsByTagName('select')[1].selectedIndex = 0; //filter other players miss, steals, blocks \n\n      var plays = _this.allPBP;\n\n      if (player !== 'all') {\n        plays = plays.filter(function (play) {\n          return play.PLAYER1_NAME === player || play.PLAYER2_NAME === player || play.PLAYER3_NAME === player;\n        });\n      }\n\n      _this.selectedPlayer = player;\n      _this.playerPBP = plays;\n\n      _this.setState({\n        pbp: plays\n      });\n    };\n\n    _this.filterMadeShots = function (player, plays) {\n      if (player !== 'all' && player) {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 1 && player === play.PLAYER1_NAME;\n        });\n      } else {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 1;\n        });\n      }\n\n      return plays;\n    };\n\n    _this.filterAssists = function (player, plays) {\n      if (player !== 'all' && player) {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 1 && play.Description.includes('AST') && player === play.PLAYER2_NAME;\n        });\n      } else {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 1 && play.Description.includes('AST');\n        });\n      }\n\n      return plays;\n    };\n\n    _this.filterMissShots = function (player, plays, homeTeamID, awayTeamID) {\n      if (player !== 'all' && player) {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 2 && !play.Description.includes('BLK') && (player === play.PLAYER1_NAME && play.PERSON1TYPE === 5 && awayTeamID === play.PLAYER1_TEAM_ID || player === play.PLAYER1_NAME && play.PERSON1TYPE === 4 && homeTeamID === play.PLAYER1_TEAM_ID);\n        });\n      } else {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 2 && !play.Description.includes('BLK');\n        });\n      }\n\n      return plays;\n    };\n\n    _this.filterBlocks = function (player, plays, homeTeamID, awayTeamID) {\n      if (player !== 'all' && player) {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 2 && play.Description.includes('BLK') && (player === play.PLAYER3_NAME && play.PERSON3TYPE === 5 && awayTeamID === play.PLAYER3_TEAM_ID || player === play.PLAYER3_NAME && play.PERSON3TYPE === 4 && homeTeamID === play.PLAYER3_TEAM_ID);\n        });\n      } else {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 2 && play.Description.includes('BLK');\n        });\n      }\n\n      return plays;\n    };\n\n    _this.filterTurnovers = function (player, plays, homeTeamID, awayTeamID) {\n      if (player !== 'all' && player) {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 5 && !play.Description.includes('STL') && (player === play.PLAYER1_NAME && play.PERSON1TYPE === 5 && awayTeamID === play.PLAYER1_TEAM_ID || player === play.PLAYER1_NAME && play.PERSON1TYPE === 4 && homeTeamID === play.PLAYER1_TEAM_ID);\n        });\n      } else {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 5 && !play.Description.includes('STL');\n        });\n      }\n\n      return plays;\n    };\n\n    _this.filterSteals = function (player, plays, homeTeamID, awayTeamID) {\n      if (player !== 'all' && player) {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 5 && play.Description.includes('STL') && (player === play.PLAYER2_NAME && play.PERSON2TYPE === 5 && awayTeamID === play.PLAYER2_TEAM_ID || player === play.PLAYER2_NAME && play.PERSON2TYPE === 4 && homeTeamID === play.PLAYER2_TEAM_ID);\n        });\n      } else {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 5 && play.Description.includes('STL');\n        });\n      }\n\n      return plays;\n    };\n\n    _this.getSelectedPlayType = function (playType) {\n      var game = _this.state.selectedGame;\n      var player = _this.selectedPlayer;\n      var homeTeamID = game.HomeTeamID;\n      var awayTeamID = game.AwayTeamID;\n      var plays = _this.playerPBP;\n\n      switch (playType) {\n        case \"Made Shot\":\n          {\n            plays = _this.filterMadeShots(player, plays);\n            break;\n          }\n\n        case \"Assist\":\n          {\n            plays = _this.filterAssists(player, plays);\n            break;\n          }\n\n        case \"Miss Shot\":\n          {\n            plays = _this.filterMissShots(player, plays, homeTeamID, awayTeamID);\n            break;\n          }\n\n        case \"Block\":\n          {\n            plays = _this.filterBlocks(player, plays, homeTeamID, awayTeamID);\n            break;\n          }\n\n        case \"Rebound\":\n          {\n            plays = plays.filter(function (play) {\n              return play.EVENTMSGTYPE === 4;\n            });\n            break;\n          }\n\n        case \"Turnover\":\n          {\n            plays = _this.filterTurnovers(player, plays, homeTeamID, awayTeamID);\n            break;\n          }\n\n        case \"Steal\":\n          {\n            plays = _this.filterSteals(player, plays, homeTeamID, awayTeamID);\n            break;\n          }\n\n        case \"Foul\":\n          {\n            plays = plays.filter(function (play) {\n              return play.EVENTMSGTYPE === 6;\n            });\n            break;\n          }\n\n        case \"Violation\":\n          {\n            plays = plays.filter(function (play) {\n              return play.EVENTMSGTYPE === 7;\n            });\n            break;\n          }\n\n        case \"Jump Ball\":\n          {\n            plays = plays.filter(function (play) {\n              return play.EVENTMSGTYPE === 10;\n            });\n            break;\n          }\n\n        default:\n          break;\n      }\n\n      _this.setState({\n        pbp: plays\n      });\n    };\n\n    _this.getSchedule = function () {\n      for (var i = 0; i < schedule.lscd.length; i++) {\n        for (var j = 0; j < schedule.lscd[i].mscd.g.length; j++) {\n          var game = schedule.lscd[i].mscd.g[j];\n          var homeCity = game.h.tc;\n          var homeName = game.h.tn;\n          var homeAbbr = game.h.ta;\n          var homeTeamID = game.h.tid;\n          var awayCity = game.v.tc;\n          var awayName = game.v.tn;\n          var awayAbbr = game.v.ta;\n          var awayTeamID = game.v.tid;\n          var date = game.gdte;\n\n          _this.games.push({\n            GameID: game.gid,\n            Arena: game.an,\n            GameName: \"\".concat(awayCity, \" \").concat(awayName, \" @ \").concat(homeCity, \" \").concat(homeName, \" (\").concat(date, \")\"),\n            HomeCity: homeCity,\n            HomeName: homeName,\n            HomeAbbr: homeAbbr,\n            HomeTeamID: homeTeamID,\n            AwayCity: awayCity,\n            AwayName: awayName,\n            AwayAbbr: awayAbbr,\n            AwayTeamID: awayTeamID,\n            Date: date\n          });\n        }\n      }\n    };\n\n    _this.state = {\n      pbp: [],\n      players: [],\n      URL: '',\n      title: '',\n      selectedGame: {}\n    };\n    _this.games = [];\n    _this.selectedPlayer = '';\n    _this.allPBP = [];\n    _this.playerPBP = [];\n    _this.playTypes = [\"Made Shot\", \"Miss Shot\", \"Assist\", \"Rebound\", \"Turnover\", \"Steal\", \"Block\", \"Foul\", \"Violation\", \"Jump Ball\"];\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getSchedule();\n      this.game = \"2019-10-16\";\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"vid-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"search-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        id: \"game-search\",\n        gameData: this.games,\n        getSelectedGame: this.getSelectedGame,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"button\",\n        value: \"Date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      })), React.createElement(\"video\", {\n        id: \"vid\",\n        key: this.state.URL,\n        width: \"768\",\n        height: \"432\",\n        controls: true,\n        autoPlay: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"source\", {\n        src: this.state.URL,\n        type: \"video/mp4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, this.state.title))), React.createElement(\"div\", {\n        id: \"plays-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"select-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, React.createElement(SelectBar, {\n        id: \"players-select\",\n        data: this.state.players,\n        default: \"All Players\",\n        getSelected: this.getSelectedPlayer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }), React.createElement(SelectBar, {\n        id: \"play-select\",\n        data: this.playTypes,\n        default: \"All Plays\",\n        getSelected: this.getSelectedPlayType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      })), React.createElement(PlayList, {\n        plays: this.state.pbp,\n        getSelectedVideoDetails: this.getSelectedVideoDetails,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\MarvinT\\Desktop\\stuff\\nba-play-viewer-master\\src\\App.js"],"names":["React","Component","PlayList","SearchBar","SelectBar","schedule","require","nba","App","getPBP","gameID","options","formatted","parameters","document","getElementsByTagName","selectedIndex","setState","title","URL","playByPlay","GameID","then","data","console","log","AvailableVideo","VIDEO_AVAILABLE_FLAG","parsePBP","pbp","plays","playsDeepCopy","playersList","temp","filterPlays","PlayByPlay","i","length","Description","HOMEDESCRIPTION","VISITORDESCRIPTION","JSON","parse","stringify","splice","PLAYER1_NAME","push","PLAYER2_NAME","PLAYER3_NAME","Set","selectedPlayer","allPBP","playerPBP","players","key","filteredData","EVENTMSGTYPE","getVidURL","eventNum","getPBPVideoURL","EventNum","url","getSelectedVideoDetails","state","selectedGame","getSelectedGame","game","getSelectedPlayer","player","filter","play","filterMadeShots","filterAssists","includes","filterMissShots","homeTeamID","awayTeamID","PERSON1TYPE","PLAYER1_TEAM_ID","filterBlocks","PERSON3TYPE","PLAYER3_TEAM_ID","filterTurnovers","filterSteals","PERSON2TYPE","PLAYER2_TEAM_ID","getSelectedPlayType","playType","HomeTeamID","AwayTeamID","getSchedule","lscd","j","mscd","g","homeCity","h","tc","homeName","tn","homeAbbr","ta","tid","awayCity","v","awayName","awayAbbr","date","gdte","games","gid","Arena","an","GameName","HomeCity","HomeName","HomeAbbr","AwayCity","AwayName","AwayAbbr","Date","playTypes"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './App.css';\r\nimport PlayList from './PlayList.js';\r\nimport SearchBar from './SearchBar.js';\r\nimport SelectBar from './SelectBar.js';\r\n\r\nconst schedule = require('./schedule.json');\r\nconst nba = require('nba-pbp-video');\r\n\r\nclass App extends Component {\r\n\r\n  constructor(){\r\n    super();\r\n\r\n    this.state = {pbp: [], players: [], URL: '', title: '', selectedGame: {}}\r\n    this.games = [];\r\n    this.selectedPlayer = '';\r\n    this.allPBP = [];\r\n    this.playerPBP = [];\r\n    this.playTypes = [\"Made Shot\", \"Miss Shot\", \"Assist\", \"Rebound\", \"Turnover\", \r\n    \"Steal\", \"Block\", \"Foul\", \"Violation\", \"Jump Ball\"];\r\n  }\r\n\r\n  getPBP = (gameID) => {\r\n    var options = {formatted: true, parameters: false}\r\n\r\n    document.getElementsByTagName('select')[0].selectedIndex = 0;\r\n    this.setState({title: ''})\r\n    this.setState({URL: ''})\r\n\r\n    nba.playByPlay({GameID: gameID}, options).then((data) =>{\r\n      console.log(data)\r\n      if(data.AvailableVideo.VIDEO_AVAILABLE_FLAG === 1 || \r\n       data.AvailableVideo.VIDEO_AVAILABLE_FLAG === 2)\r\n        this.parsePBP(data)\r\n      else this.setState({pbp: []})\r\n    })\r\n  }\r\n\r\n  parsePBP = (data) => {\r\n    var plays = [];\r\n    var playsDeepCopy = [];\r\n    var playersList = [];\r\n    var temp = [];\r\n\r\n    plays = this.filterPlays(data.PlayByPlay);\r\n\r\n    for(var i=1; i<plays.length;i++){\r\n\r\n      if(!plays[i].Description){\r\n        if(plays[i].HOMEDESCRIPTION && plays[i].VISITORDESCRIPTION){\r\n          plays[i].Description = plays[i].HOMEDESCRIPTION;\r\n          playsDeepCopy[i] = JSON.parse(JSON.stringify(plays[i]));\r\n          playsDeepCopy[i].Description = plays[i].VISITORDESCRIPTION;\r\n          plays.splice(i, 0, playsDeepCopy[i])\r\n        } else {\r\n          plays[i].Description = plays[i].HOMEDESCRIPTION ? plays[i].HOMEDESCRIPTION : plays[i].VISITORDESCRIPTION;\r\n        }\r\n\r\n        if(plays[i].PLAYER1_NAME) temp.push(plays[i].PLAYER1_NAME)\r\n          if(plays[i].PLAYER2_NAME) temp.push(plays[i].PLAYER2_NAME)\r\n            if(plays[i].PLAYER3_NAME) temp.push(plays[i].PLAYER3_NAME) \r\n          }\r\n      }\r\n\r\n      console.log(plays)\r\n\r\n      playersList = [...new Set(temp)]\r\n\r\n      document.getElementsByTagName('select')[1].selectedIndex = 0;\r\n      this.selectedPlayer = \"\";\r\n      this.allPBP = plays;\r\n      this.playerPBP = plays;\r\n      this.setState({pbp: plays})\r\n      this.setState({players: playersList})\r\n\r\n    //this.setState({pbp: [...this.state.pbp, plays]})\r\n  }\r\n\r\n  filterPlays = (data) => {\r\n    //removing free throws (3), timeouts (9), and subs (8)\r\n    var key, filteredData = [];\r\n    for(key in data){\r\n      if(!(data[key].EVENTMSGTYPE === 9 || \r\n       data[key].EVENTMSGTYPE === 8 || \r\n       data[key].EVENTMSGTYPE === 3)){\r\n        filteredData.push(data[key])\r\n      }\r\n    }\r\n\r\n    return filteredData;\r\n  }\r\n\r\n  getVidURL = (eventNum, gameID) => {\r\n    nba.getPBPVideoURL({EventNum: eventNum, GameID: gameID}).then((url) => {\r\n      console.log(url)\r\n      this.setState({URL: url})\r\n    })\r\n  }\r\n\r\n  getSelectedVideoDetails = (eventNum, title) => {\r\n    this.getVidURL(eventNum, this.state.selectedGame.GameID) \r\n    this.setState({title: title})\r\n  }\r\n\r\n  getSelectedGame = (game) => {\r\n    this.setState({\r\n      selectedGame: game\r\n    })\r\n\r\n    this.getPBP(game.GameID)\r\n  }\r\n\r\n  getSelectedPlayer = (player) => {\r\n    document.getElementsByTagName('select')[1].selectedIndex = 0;\r\n\r\n    //filter other players miss, steals, blocks \r\n\r\n    var plays = this.allPBP;\r\n    if(player !== 'all'){\r\n      plays = plays.filter(play => play.PLAYER1_NAME === player || \r\n       play.PLAYER2_NAME === player || \r\n       play.PLAYER3_NAME === player) \r\n    }\r\n\r\n    this.selectedPlayer = player;\r\n    this.playerPBP = plays;\r\n    this.setState({pbp: plays});\r\n  }\r\n\r\n  filterMadeShots = (player, plays) => {\r\n    if(player !== 'all' && player){\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 1\r\n        && ((player === play.PLAYER1_NAME)));\r\n    } else {\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 1)\r\n    }   \r\n\r\n    return plays;    \r\n  }\r\n\r\n  filterAssists = (player, plays) => {\r\n    if(player !== 'all' && player){\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 1\r\n        && play.Description.includes('AST')\r\n        && ((player === play.PLAYER2_NAME)));\r\n    } else {\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 1\r\n        && play.Description.includes('AST'))\r\n    }\r\n\r\n    return plays;\r\n  }\r\n\r\n  filterMissShots = (player, plays, homeTeamID, awayTeamID) => {\r\n    if(player !== 'all' && player){\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 2\r\n        && !play.Description.includes('BLK')\r\n        && ((player === play.PLAYER1_NAME && play.PERSON1TYPE === 5 && awayTeamID === play.PLAYER1_TEAM_ID) ||\r\n          (player === play.PLAYER1_NAME && play.PERSON1TYPE === 4 && homeTeamID === play.PLAYER1_TEAM_ID)\r\n          ));\r\n    } else {\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 2\r\n        && !play.Description.includes('BLK'))\r\n    }\r\n\r\n    return plays;  \r\n  }\r\n\r\n  filterBlocks = (player, plays, homeTeamID, awayTeamID) => {\r\n    if(player !== 'all' && player){\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 2\r\n        && play.Description.includes('BLK')\r\n        && ((player === play.PLAYER3_NAME && play.PERSON3TYPE === 5 && awayTeamID === play.PLAYER3_TEAM_ID) ||\r\n          (player === play.PLAYER3_NAME && play.PERSON3TYPE === 4 && homeTeamID === play.PLAYER3_TEAM_ID)\r\n          ));\r\n    } else {\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 2\r\n        && play.Description.includes('BLK'))\r\n    }\r\n\r\n    return plays;\r\n  }\r\n\r\n  filterTurnovers = (player, plays, homeTeamID, awayTeamID) => {\r\n    if(player !== 'all' && player){\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 5\r\n        && !play.Description.includes('STL')\r\n        && ((player === play.PLAYER1_NAME && play.PERSON1TYPE === 5 && awayTeamID === play.PLAYER1_TEAM_ID) ||\r\n          (player === play.PLAYER1_NAME && play.PERSON1TYPE === 4 && homeTeamID === play.PLAYER1_TEAM_ID)\r\n          ));\r\n    } else {\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 5\r\n        && !play.Description.includes('STL'))\r\n    }\r\n\r\n    return plays;    \r\n  }\r\n\r\n  filterSteals = (player, plays, homeTeamID, awayTeamID) => {\r\n    if(player !== 'all' && player){\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 5\r\n        && play.Description.includes('STL')\r\n        && ((player === play.PLAYER2_NAME && play.PERSON2TYPE === 5 && awayTeamID === play.PLAYER2_TEAM_ID) ||\r\n          (player === play.PLAYER2_NAME && play.PERSON2TYPE === 4 && homeTeamID === play.PLAYER2_TEAM_ID)\r\n          ));\r\n    } else {\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 5\r\n        && play.Description.includes('STL'))\r\n    }\r\n\r\n    return plays;   \r\n  }\r\n\r\n  getSelectedPlayType = (playType) => {\r\n\r\n    var game = this.state.selectedGame;\r\n    var player = this.selectedPlayer;\r\n    var homeTeamID = game.HomeTeamID;\r\n    var awayTeamID = game.AwayTeamID;\r\n    var plays = this.playerPBP;\r\n\r\n\r\n    switch(playType){\r\n      case (\"Made Shot\"): {\r\n        plays = this.filterMadeShots(player, plays);\r\n        break;\r\n      }\r\n      case (\"Assist\"): {\r\n        plays = this.filterAssists(player, plays);\r\n        break;\r\n      }\r\n      case (\"Miss Shot\"): {\r\n        plays = this.filterMissShots(player, plays, homeTeamID, awayTeamID);\r\n        break;\r\n      }\r\n      case (\"Block\"): {\r\n        plays = this.filterBlocks(player, plays, homeTeamID, awayTeamID);\r\n        break;\r\n      }\r\n      case (\"Rebound\"): {\r\n        plays = plays.filter(play => play.EVENTMSGTYPE === 4);        \r\n        break;\r\n      }\r\n      case (\"Turnover\"): {\r\n        plays = this.filterTurnovers(player, plays, homeTeamID, awayTeamID);\r\n        break;\r\n      }\r\n      case (\"Steal\"): {\r\n        plays = this.filterSteals(player, plays, homeTeamID, awayTeamID);\r\n        break;\r\n      }\r\n      case (\"Foul\"): {\r\n        plays = plays.filter(play => play.EVENTMSGTYPE === 6);\r\n        break;\r\n      }\r\n      case (\"Violation\"): {\r\n        plays = plays.filter(play => play.EVENTMSGTYPE === 7); \r\n        break;\r\n      }\r\n      case (\"Jump Ball\"): {\r\n        plays = plays.filter(play => play.EVENTMSGTYPE === 10); \r\n        break;\r\n      }\r\n\r\n      default: break;       \r\n    }\r\n\r\n    this.setState({\r\n      pbp: plays\r\n    })\r\n  }\r\n\r\n  getSchedule = () => {\r\n    for(var i=0; i<schedule.lscd.length;i++){\r\n      for(var j=0; j<schedule.lscd[i].mscd.g.length;j++){\r\n        var game = schedule.lscd[i].mscd.g[j];\r\n        var homeCity = game.h.tc;\r\n        var homeName = game.h.tn;\r\n        var homeAbbr = game.h.ta;\r\n        var homeTeamID = game.h.tid;\r\n        var awayCity = game.v.tc;\r\n        var awayName = game.v.tn;\r\n        var awayAbbr = game.v.ta;\r\n        var awayTeamID = game.v.tid;\r\n        var date = game.gdte;\r\n\r\n        this.games.push({GameID: game.gid,\r\n         Arena: game.an,\r\n         GameName: `${awayCity} ${awayName} @ ${homeCity} ${homeName} (${date})`,\r\n         HomeCity: homeCity,\r\n         HomeName: homeName,\r\n         HomeAbbr: homeAbbr,\r\n         HomeTeamID: homeTeamID,\r\n         AwayCity: awayCity,\r\n         AwayName: awayName,\r\n         AwayAbbr: awayAbbr,\r\n         AwayTeamID: awayTeamID,\r\n         Date: date})\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.getSchedule();\r\n    this.game = \"2019-10-16\"\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <div id=\"vid-wrapper\">\r\n          <div id=\"search-wrapper\">\r\n          <SearchBar id=\"game-search\" gameData={this.games} getSelectedGame={this.getSelectedGame}/>\r\n          <input type=\"button\" value=\"Date\"></input>\r\n          </div>\r\n          <video id=\"vid\" key={this.state.URL} width=\"768\" height=\"432\" controls autoPlay>\r\n            <source src={this.state.URL} type=\"video/mp4\"/>\r\n          </video>\r\n          <div id=\"description\">\r\n            <span>{this.state.title}</span>\r\n          </div>\r\n        </div>\r\n        <div id=\"plays-wrapper\">\r\n          <div id=\"select-wrapper\">\r\n            <SelectBar id=\"players-select\" data={this.state.players} default=\"All Players\" getSelected={this.getSelectedPlayer}/>\r\n            <SelectBar id=\"play-select\" data={this.playTypes} default=\"All Plays\" getSelected={this.getSelectedPlayType}/>\r\n          </div>\r\n          <PlayList plays={this.state.pbp} getSelectedVideoDetails={this.getSelectedVideoDetails}/>\r\n        </div>\r\n      </div>\r\n      );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}