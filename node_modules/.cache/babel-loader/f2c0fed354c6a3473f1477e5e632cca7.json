{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\MarvinT\\\\Desktop\\\\stuff\\\\nba-play-viewer-master\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport PlayList from './PlayList.js';\nimport SearchBar from './SearchBar.js';\nimport SelectBar from './SelectBar.js';\n\nvar schedule = require('./schedule.json');\n\nvar nba = require('nba-pbp-video');\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.parseUserURL = function (url) {\n      var temp = url.split('?')[1].split('-');\n      var gameID = temp[0];\n      var eventNum = temp[1];\n\n      _this.getPBP(gameID);\n\n      _this.getVidURL(eventNum, gameID);\n    };\n\n    _this.getPBP = function (gameID) {\n      var options = {\n        formatted: true,\n        parameters: false\n      };\n      document.getElementsByTagName('select')[0].selectedIndex = 0;\n\n      _this.setState({\n        title: ''\n      });\n\n      _this.setState({\n        URL: ''\n      });\n\n      _this.setState({\n        shareURL: ''\n      });\n\n      nba.playByPlay({\n        GameID: gameID\n      }, options).then(function (data) {\n        if (data.AvailableVideo.VIDEO_AVAILABLE_FLAG === 1 || data.AvailableVideo.VIDEO_AVAILABLE_FLAG === 2) _this.parsePBP(data);else _this.setState({\n          pbp: []\n        });\n      });\n    };\n\n    _this.parsePBP = function (data) {\n      var plays = [];\n      var playsDeepCopy = [];\n      var playersList = [];\n      var temp = [];\n      plays = _this.filterPlays(data.PlayByPlay);\n\n      for (var i = 1; i < plays.length; i++) {\n        if (!plays[i].Description) {\n          if (plays[i].HOMEDESCRIPTION && plays[i].VISITORDESCRIPTION) {\n            plays[i].Description = plays[i].HOMEDESCRIPTION;\n            playsDeepCopy[i] = JSON.parse(JSON.stringify(plays[i]));\n            playsDeepCopy[i].Description = plays[i].VISITORDESCRIPTION;\n            plays.splice(i, 0, playsDeepCopy[i]);\n          } else {\n            plays[i].Description = plays[i].HOMEDESCRIPTION ? plays[i].HOMEDESCRIPTION : plays[i].VISITORDESCRIPTION;\n          }\n\n          if (plays[i].PLAYER1_NAME) temp.push(plays[i].PLAYER1_NAME);\n          if (plays[i].PLAYER2_NAME) temp.push(plays[i].PLAYER2_NAME);\n          if (plays[i].PLAYER3_NAME) temp.push(plays[i].PLAYER3_NAME);\n        }\n      }\n\n      playersList = _toConsumableArray(new Set(temp));\n      document.getElementsByTagName('select')[1].selectedIndex = 0;\n      _this.selectedPlayer = \"\";\n      _this.allPBP = plays;\n      _this.playerPBP = plays;\n\n      _this.setState({\n        pbp: plays\n      });\n\n      _this.setState({\n        players: playersList\n      }); //this.setState({pbp: [...this.state.pbp, plays]})\n\n    };\n\n    _this.filterPlays = function (data) {\n      //removing free throws (3), timeouts (9), and subs (8)\n      var key,\n          filteredData = [];\n\n      for (key in data) {\n        if (!(data[key].EVENTMSGTYPE === 9 || data[key].EVENTMSGTYPE === 8 || data[key].EVENTMSGTYPE === 3)) {\n          filteredData.push(data[key]);\n        }\n      }\n\n      return filteredData;\n    };\n\n    _this.getVidURL = function (eventNum, gameID) {\n      _this.setState({\n        shareURL: 'Share: http://localhost:3000/?' + gameID + '-' + eventNum\n      });\n\n      nba.getPBPVideoURL({\n        EventNum: eventNum,\n        GameID: gameID\n      }).then(function (url) {\n        console.log(url);\n\n        _this.setState({\n          URL: url\n        });\n      });\n    };\n\n    _this.getSelectedVideoDetails = function (eventNum, title) {\n      _this.getVidURL(eventNum, _this.state.selectedGame.GameID);\n\n      _this.setState({\n        title: title\n      });\n    };\n\n    _this.getSelectedGame = function (game) {\n      _this.setState({\n        selectedGame: game\n      });\n\n      _this.getPBP(game.GameID);\n    };\n\n    _this.getSelectedPlayer = function (player) {\n      document.getElementsByTagName('select')[1].selectedIndex = 0; //filter other players miss, steals, blocks \n\n      var plays = _this.allPBP;\n\n      if (player !== 'all') {\n        plays = plays.filter(function (play) {\n          return play.PLAYER1_NAME === player || play.PLAYER2_NAME === player || play.PLAYER3_NAME === player;\n        });\n      }\n\n      _this.selectedPlayer = player;\n      _this.playerPBP = plays;\n\n      _this.setState({\n        pbp: plays\n      });\n    };\n\n    _this.filterMadeShots = function (player, plays) {\n      if (player !== 'all' && player) {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 1 && player === play.PLAYER1_NAME;\n        });\n      } else {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 1;\n        });\n      }\n\n      return plays;\n    };\n\n    _this.filterAssists = function (player, plays) {\n      if (player !== 'all' && player) {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 1 && play.Description.includes('AST') && player === play.PLAYER2_NAME;\n        });\n      } else {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 1 && play.Description.includes('AST');\n        });\n      }\n\n      return plays;\n    };\n\n    _this.filterMissShots = function (player, plays, homeTeamID, awayTeamID) {\n      if (player !== 'all' && player) {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 2 && !play.Description.includes('BLK') && (player === play.PLAYER1_NAME && play.PERSON1TYPE === 5 && awayTeamID === play.PLAYER1_TEAM_ID || player === play.PLAYER1_NAME && play.PERSON1TYPE === 4 && homeTeamID === play.PLAYER1_TEAM_ID);\n        });\n      } else {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 2 && !play.Description.includes('BLK');\n        });\n      }\n\n      return plays;\n    };\n\n    _this.filterBlocks = function (player, plays, homeTeamID, awayTeamID) {\n      if (player !== 'all' && player) {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 2 && play.Description.includes('BLK') && (player === play.PLAYER3_NAME && play.PERSON3TYPE === 5 && awayTeamID === play.PLAYER3_TEAM_ID || player === play.PLAYER3_NAME && play.PERSON3TYPE === 4 && homeTeamID === play.PLAYER3_TEAM_ID);\n        });\n      } else {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 2 && play.Description.includes('BLK');\n        });\n      }\n\n      return plays;\n    };\n\n    _this.filterTurnovers = function (player, plays, homeTeamID, awayTeamID) {\n      if (player !== 'all' && player) {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 5 && !play.Description.includes('STL') && (player === play.PLAYER1_NAME && play.PERSON1TYPE === 5 && awayTeamID === play.PLAYER1_TEAM_ID || player === play.PLAYER1_NAME && play.PERSON1TYPE === 4 && homeTeamID === play.PLAYER1_TEAM_ID);\n        });\n      } else {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 5 && !play.Description.includes('STL');\n        });\n      }\n\n      return plays;\n    };\n\n    _this.filterSteals = function (player, plays, homeTeamID, awayTeamID) {\n      if (player !== 'all' && player) {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 5 && play.Description.includes('STL') && (player === play.PLAYER2_NAME && play.PERSON2TYPE === 5 && awayTeamID === play.PLAYER2_TEAM_ID || player === play.PLAYER2_NAME && play.PERSON2TYPE === 4 && homeTeamID === play.PLAYER2_TEAM_ID);\n        });\n      } else {\n        plays = plays.filter(function (play) {\n          return play.EVENTMSGTYPE === 5 && play.Description.includes('STL');\n        });\n      }\n\n      return plays;\n    };\n\n    _this.getSelectedPlayType = function (playType) {\n      var game = _this.state.selectedGame;\n      var player = _this.selectedPlayer;\n      var homeTeamID = game.HomeTeamID;\n      var awayTeamID = game.AwayTeamID;\n      var plays = _this.playerPBP;\n\n      switch (playType) {\n        case \"Made Shot\":\n          {\n            plays = _this.filterMadeShots(player, plays);\n            break;\n          }\n\n        case \"Assist\":\n          {\n            plays = _this.filterAssists(player, plays);\n            break;\n          }\n\n        case \"Miss Shot\":\n          {\n            plays = _this.filterMissShots(player, plays, homeTeamID, awayTeamID);\n            break;\n          }\n\n        case \"Block\":\n          {\n            plays = _this.filterBlocks(player, plays, homeTeamID, awayTeamID);\n            break;\n          }\n\n        case \"Rebound\":\n          {\n            plays = plays.filter(function (play) {\n              return play.EVENTMSGTYPE === 4;\n            });\n            break;\n          }\n\n        case \"Turnover\":\n          {\n            plays = _this.filterTurnovers(player, plays, homeTeamID, awayTeamID);\n            break;\n          }\n\n        case \"Steal\":\n          {\n            plays = _this.filterSteals(player, plays, homeTeamID, awayTeamID);\n            break;\n          }\n\n        case \"Foul\":\n          {\n            plays = plays.filter(function (play) {\n              return play.EVENTMSGTYPE === 6;\n            });\n            break;\n          }\n\n        case \"Violation\":\n          {\n            plays = plays.filter(function (play) {\n              return play.EVENTMSGTYPE === 7;\n            });\n            break;\n          }\n\n        case \"Jump Ball\":\n          {\n            plays = plays.filter(function (play) {\n              return play.EVENTMSGTYPE === 10;\n            });\n            break;\n          }\n\n        default:\n          break;\n      }\n\n      _this.setState({\n        pbp: plays\n      });\n    };\n\n    _this.getSchedule = function () {\n      for (var i = 0; i < schedule.lscd.length; i++) {\n        for (var j = 0; j < schedule.lscd[i].mscd.g.length; j++) {\n          var game = schedule.lscd[i].mscd.g[j];\n          var homeCity = game.h.tc;\n          var homeName = game.h.tn;\n          var homeAbbr = game.h.ta;\n          var homeTeamID = game.h.tid;\n          var awayCity = game.v.tc;\n          var awayName = game.v.tn;\n          var awayAbbr = game.v.ta;\n          var awayTeamID = game.v.tid;\n          var date = game.gdte;\n\n          _this.games.push({\n            GameID: game.gid,\n            Arena: game.an,\n            GameName: \"\".concat(awayCity, \" \").concat(awayName, \" @ \").concat(homeCity, \" \").concat(homeName, \" (\").concat(date, \")\"),\n            HomeCity: homeCity,\n            HomeName: homeName,\n            HomeAbbr: homeAbbr,\n            HomeTeamID: homeTeamID,\n            AwayCity: awayCity,\n            AwayName: awayName,\n            AwayAbbr: awayAbbr,\n            AwayTeamID: awayTeamID,\n            Date: date\n          });\n        }\n      }\n    };\n\n    _this.state = {\n      pbp: [],\n      players: [],\n      URL: '',\n      title: '',\n      shareURL: '',\n      selectedGame: {}\n    };\n    _this.games = [];\n    _this.selectedPlayer = '';\n    _this.allPBP = [];\n    _this.playerPBP = [];\n    _this.playTypes = [\"Made Shot\", \"Miss Shot\", \"Assist\", \"Rebound\", \"Turnover\", \"Steal\", \"Block\", \"Foul\", \"Violation\", \"Jump Ball\"];\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var url = window.location.href;\n      this.getSchedule();\n      if (url.indexOf('?') > 1) this.parseUserURL(url);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"vid-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"search-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        id: \"game-search\",\n        gameData: this.games,\n        getSelectedGame: this.getSelectedGame,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"button\",\n        value: \"Date\",\n        onClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      })), React.createElement(\"video\", {\n        id: \"vid\",\n        key: this.state.URL,\n        width: \"768\",\n        height: \"432\",\n        controls: true,\n        autoPlay: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, React.createElement(\"source\", {\n        src: this.state.URL,\n        type: \"video/mp4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, this.state.title), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, this.state.shareURL))), React.createElement(\"div\", {\n        id: \"plays-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"select-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, React.createElement(SelectBar, {\n        id: \"players-select\",\n        data: this.state.players,\n        default: \"All Players\",\n        getSelected: this.getSelectedPlayer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }), React.createElement(SelectBar, {\n        id: \"play-select\",\n        data: this.playTypes,\n        default: \"All Plays\",\n        getSelected: this.getSelectedPlayType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      })), React.createElement(PlayList, {\n        plays: this.state.pbp,\n        getSelectedVideoDetails: this.getSelectedVideoDetails,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\MarvinT\\Desktop\\stuff\\nba-play-viewer-master\\src\\App.js"],"names":["React","Component","PlayList","SearchBar","SelectBar","schedule","require","nba","App","parseUserURL","url","temp","split","gameID","eventNum","getPBP","getVidURL","options","formatted","parameters","document","getElementsByTagName","selectedIndex","setState","title","URL","shareURL","playByPlay","GameID","then","data","AvailableVideo","VIDEO_AVAILABLE_FLAG","parsePBP","pbp","plays","playsDeepCopy","playersList","filterPlays","PlayByPlay","i","length","Description","HOMEDESCRIPTION","VISITORDESCRIPTION","JSON","parse","stringify","splice","PLAYER1_NAME","push","PLAYER2_NAME","PLAYER3_NAME","Set","selectedPlayer","allPBP","playerPBP","players","key","filteredData","EVENTMSGTYPE","getPBPVideoURL","EventNum","console","log","getSelectedVideoDetails","state","selectedGame","getSelectedGame","game","getSelectedPlayer","player","filter","play","filterMadeShots","filterAssists","includes","filterMissShots","homeTeamID","awayTeamID","PERSON1TYPE","PLAYER1_TEAM_ID","filterBlocks","PERSON3TYPE","PLAYER3_TEAM_ID","filterTurnovers","filterSteals","PERSON2TYPE","PLAYER2_TEAM_ID","getSelectedPlayType","playType","HomeTeamID","AwayTeamID","getSchedule","lscd","j","mscd","g","homeCity","h","tc","homeName","tn","homeAbbr","ta","tid","awayCity","v","awayName","awayAbbr","date","gdte","games","gid","Arena","an","GameName","HomeCity","HomeName","HomeAbbr","AwayCity","AwayName","AwayAbbr","Date","playTypes","window","location","href","indexOf","handleClick"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './App.css';\r\nimport PlayList from './PlayList.js';\r\nimport SearchBar from './SearchBar.js';\r\nimport SelectBar from './SelectBar.js';\r\n\r\nconst schedule = require('./schedule.json');\r\nconst nba = require('nba-pbp-video');\r\n\r\nclass App extends Component {\r\n\r\n  constructor(){\r\n    super();\r\n\r\n    this.state = {pbp: [], players: [], URL: '', title: '', shareURL: '', selectedGame: {}}\r\n    this.games = [];\r\n    this.selectedPlayer = '';\r\n    this.allPBP = [];\r\n    this.playerPBP = [];\r\n    this.playTypes = [\"Made Shot\", \"Miss Shot\", \"Assist\", \"Rebound\", \"Turnover\", \r\n    \"Steal\", \"Block\", \"Foul\", \"Violation\", \"Jump Ball\"];\r\n  }\r\n\r\n  parseUserURL = (url) => {\r\n    var temp = url.split('?')[1].split('-');\r\n    var gameID = temp[0];\r\n    var eventNum = temp[1];\r\n\r\n    this.getPBP(gameID);\r\n    this.getVidURL(eventNum, gameID);\r\n  }\r\n\r\n  getPBP = (gameID) => {\r\n    var options = {formatted: true, parameters: false}\r\n\r\n    document.getElementsByTagName('select')[0].selectedIndex = 0;\r\n    this.setState({title: ''})\r\n    this.setState({URL: ''})\r\n    this.setState({shareURL: ''})\r\n\r\n    nba.playByPlay({GameID: gameID}, options).then((data) =>{\r\n      if(data.AvailableVideo.VIDEO_AVAILABLE_FLAG === 1 || \r\n       data.AvailableVideo.VIDEO_AVAILABLE_FLAG === 2)\r\n        this.parsePBP(data)\r\n      else this.setState({pbp: []})\r\n    })\r\n  }\r\n\r\n  parsePBP = (data) => {\r\n    var plays = [];\r\n    var playsDeepCopy = [];\r\n    var playersList = [];\r\n    var temp = [];\r\n\r\n    plays = this.filterPlays(data.PlayByPlay);\r\n\r\n    for(var i=1; i<plays.length;i++){\r\n\r\n      if(!plays[i].Description){\r\n        if(plays[i].HOMEDESCRIPTION && plays[i].VISITORDESCRIPTION){\r\n          plays[i].Description = plays[i].HOMEDESCRIPTION;\r\n          playsDeepCopy[i] = JSON.parse(JSON.stringify(plays[i]));\r\n          playsDeepCopy[i].Description = plays[i].VISITORDESCRIPTION;\r\n          plays.splice(i, 0, playsDeepCopy[i])\r\n        } else {\r\n          plays[i].Description = plays[i].HOMEDESCRIPTION ? plays[i].HOMEDESCRIPTION : plays[i].VISITORDESCRIPTION;\r\n        }\r\n\r\n        if(plays[i].PLAYER1_NAME) temp.push(plays[i].PLAYER1_NAME)\r\n          if(plays[i].PLAYER2_NAME) temp.push(plays[i].PLAYER2_NAME)\r\n            if(plays[i].PLAYER3_NAME) temp.push(plays[i].PLAYER3_NAME) \r\n          }\r\n      }\r\n\r\n      playersList = [...new Set(temp)]\r\n\r\n      document.getElementsByTagName('select')[1].selectedIndex = 0;\r\n      this.selectedPlayer = \"\";\r\n      this.allPBP = plays;\r\n      this.playerPBP = plays;\r\n      this.setState({pbp: plays})\r\n      this.setState({players: playersList})\r\n\r\n    //this.setState({pbp: [...this.state.pbp, plays]})\r\n  }\r\n\r\n  filterPlays = (data) => {\r\n    //removing free throws (3), timeouts (9), and subs (8)\r\n    var key, filteredData = [];\r\n    for(key in data){\r\n      if(!(data[key].EVENTMSGTYPE === 9 || \r\n       data[key].EVENTMSGTYPE === 8 || \r\n       data[key].EVENTMSGTYPE === 3)){\r\n        filteredData.push(data[key])\r\n      }\r\n    }\r\n\r\n    return filteredData;\r\n  }\r\n\r\n  getVidURL = (eventNum, gameID) => {\r\n    this.setState({shareURL: 'Share: http://localhost:3000/?' + gameID + '-' + eventNum})\r\n\r\n    nba.getPBPVideoURL({EventNum: eventNum, GameID: gameID}).then((url) => {\r\n      console.log(url)\r\n      this.setState({URL: url})\r\n    })\r\n  }\r\n\r\n  getSelectedVideoDetails = (eventNum, title) => {\r\n    this.getVidURL(eventNum, this.state.selectedGame.GameID) \r\n    this.setState({title: title})\r\n  }\r\n\r\n  getSelectedGame = (game) => {\r\n    this.setState({\r\n      selectedGame: game\r\n    })\r\n\r\n    this.getPBP(game.GameID)\r\n  }\r\n\r\n  getSelectedPlayer = (player) => {\r\n    document.getElementsByTagName('select')[1].selectedIndex = 0;\r\n\r\n    //filter other players miss, steals, blocks \r\n\r\n    var plays = this.allPBP;\r\n    if(player !== 'all'){\r\n      plays = plays.filter(play => play.PLAYER1_NAME === player || \r\n       play.PLAYER2_NAME === player || \r\n       play.PLAYER3_NAME === player) \r\n    }\r\n\r\n    this.selectedPlayer = player;\r\n    this.playerPBP = plays;\r\n    this.setState({pbp: plays});\r\n  }\r\n\r\n  filterMadeShots = (player, plays) => {\r\n    if(player !== 'all' && player){\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 1\r\n        && ((player === play.PLAYER1_NAME)));\r\n    } else {\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 1)\r\n    }   \r\n\r\n    return plays;    \r\n  }\r\n\r\n  filterAssists = (player, plays) => {\r\n    if(player !== 'all' && player){\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 1\r\n        && play.Description.includes('AST')\r\n        && ((player === play.PLAYER2_NAME)));\r\n    } else {\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 1\r\n        && play.Description.includes('AST'))\r\n    }\r\n\r\n    return plays;\r\n  }\r\n\r\n  filterMissShots = (player, plays, homeTeamID, awayTeamID) => {\r\n    if(player !== 'all' && player){\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 2\r\n        && !play.Description.includes('BLK')\r\n        && ((player === play.PLAYER1_NAME && play.PERSON1TYPE === 5 && awayTeamID === play.PLAYER1_TEAM_ID) ||\r\n          (player === play.PLAYER1_NAME && play.PERSON1TYPE === 4 && homeTeamID === play.PLAYER1_TEAM_ID)\r\n          ));\r\n    } else {\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 2\r\n        && !play.Description.includes('BLK'))\r\n    }\r\n\r\n    return plays;  \r\n  }\r\n\r\n  filterBlocks = (player, plays, homeTeamID, awayTeamID) => {\r\n    if(player !== 'all' && player){\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 2\r\n        && play.Description.includes('BLK')\r\n        && ((player === play.PLAYER3_NAME && play.PERSON3TYPE === 5 && awayTeamID === play.PLAYER3_TEAM_ID) ||\r\n          (player === play.PLAYER3_NAME && play.PERSON3TYPE === 4 && homeTeamID === play.PLAYER3_TEAM_ID)\r\n          ));\r\n    } else {\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 2\r\n        && play.Description.includes('BLK'))\r\n    }\r\n\r\n    return plays;\r\n  }\r\n\r\n  filterTurnovers = (player, plays, homeTeamID, awayTeamID) => {\r\n    if(player !== 'all' && player){\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 5\r\n        && !play.Description.includes('STL')\r\n        && ((player === play.PLAYER1_NAME && play.PERSON1TYPE === 5 && awayTeamID === play.PLAYER1_TEAM_ID) ||\r\n          (player === play.PLAYER1_NAME && play.PERSON1TYPE === 4 && homeTeamID === play.PLAYER1_TEAM_ID)\r\n          ));\r\n    } else {\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 5\r\n        && !play.Description.includes('STL'))\r\n    }\r\n\r\n    return plays;    \r\n  }\r\n\r\n  filterSteals = (player, plays, homeTeamID, awayTeamID) => {\r\n    if(player !== 'all' && player){\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 5\r\n        && play.Description.includes('STL')\r\n        && ((player === play.PLAYER2_NAME && play.PERSON2TYPE === 5 && awayTeamID === play.PLAYER2_TEAM_ID) ||\r\n          (player === play.PLAYER2_NAME && play.PERSON2TYPE === 4 && homeTeamID === play.PLAYER2_TEAM_ID)\r\n          ));\r\n    } else {\r\n      plays = plays.filter(play => play.EVENTMSGTYPE === 5\r\n        && play.Description.includes('STL'))\r\n    }\r\n\r\n    return plays;   \r\n  }\r\n\r\n  getSelectedPlayType = (playType) => {\r\n\r\n    var game = this.state.selectedGame;\r\n    var player = this.selectedPlayer;\r\n    var homeTeamID = game.HomeTeamID;\r\n    var awayTeamID = game.AwayTeamID;\r\n    var plays = this.playerPBP;\r\n\r\n\r\n    switch(playType){\r\n      case (\"Made Shot\"): {\r\n        plays = this.filterMadeShots(player, plays);\r\n        break;\r\n      }\r\n      case (\"Assist\"): {\r\n        plays = this.filterAssists(player, plays);\r\n        break;\r\n      }\r\n      case (\"Miss Shot\"): {\r\n        plays = this.filterMissShots(player, plays, homeTeamID, awayTeamID);\r\n        break;\r\n      }\r\n      case (\"Block\"): {\r\n        plays = this.filterBlocks(player, plays, homeTeamID, awayTeamID);\r\n        break;\r\n      }\r\n      case (\"Rebound\"): {\r\n        plays = plays.filter(play => play.EVENTMSGTYPE === 4);        \r\n        break;\r\n      }\r\n      case (\"Turnover\"): {\r\n        plays = this.filterTurnovers(player, plays, homeTeamID, awayTeamID);\r\n        break;\r\n      }\r\n      case (\"Steal\"): {\r\n        plays = this.filterSteals(player, plays, homeTeamID, awayTeamID);\r\n        break;\r\n      }\r\n      case (\"Foul\"): {\r\n        plays = plays.filter(play => play.EVENTMSGTYPE === 6);\r\n        break;\r\n      }\r\n      case (\"Violation\"): {\r\n        plays = plays.filter(play => play.EVENTMSGTYPE === 7); \r\n        break;\r\n      }\r\n      case (\"Jump Ball\"): {\r\n        plays = plays.filter(play => play.EVENTMSGTYPE === 10); \r\n        break;\r\n      }\r\n\r\n      default: break;       \r\n    }\r\n\r\n    this.setState({\r\n      pbp: plays\r\n    })\r\n  }\r\n\r\n  getSchedule = () => {\r\n    for(var i=0; i<schedule.lscd.length;i++){\r\n      for(var j=0; j<schedule.lscd[i].mscd.g.length;j++){\r\n        var game = schedule.lscd[i].mscd.g[j];\r\n        var homeCity = game.h.tc;\r\n        var homeName = game.h.tn;\r\n        var homeAbbr = game.h.ta;\r\n        var homeTeamID = game.h.tid;\r\n        var awayCity = game.v.tc;\r\n        var awayName = game.v.tn;\r\n        var awayAbbr = game.v.ta;\r\n        var awayTeamID = game.v.tid;\r\n        var date = game.gdte;\r\n\r\n        this.games.push({GameID: game.gid,\r\n         Arena: game.an,\r\n         GameName: `${awayCity} ${awayName} @ ${homeCity} ${homeName} (${date})`,\r\n         HomeCity: homeCity,\r\n         HomeName: homeName,\r\n         HomeAbbr: homeAbbr,\r\n         HomeTeamID: homeTeamID,\r\n         AwayCity: awayCity,\r\n         AwayName: awayName,\r\n         AwayAbbr: awayAbbr,\r\n         AwayTeamID: awayTeamID,\r\n         Date: date})\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    var url = window.location.href;\r\n    this.getSchedule();\r\n\r\n    if(url.indexOf('?') > 1) this.parseUserURL(url);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <div id=\"vid-wrapper\">\r\n          <div id=\"search-wrapper\">\r\n          <SearchBar id=\"game-search\" gameData={this.games} getSelectedGame={this.getSelectedGame}/>\r\n          <input type=\"button\" value=\"Date\" onClick={this.handleClick}></input>\r\n          </div>\r\n          <video id=\"vid\" key={this.state.URL} width=\"768\" height=\"432\" controls autoPlay>\r\n            <source src={this.state.URL} type=\"video/mp4\"/>\r\n          </video>\r\n          <div id=\"description\">\r\n            <span>{this.state.title}</span>\r\n            <br></br>\r\n            <span>{this.state.shareURL}</span>\r\n          </div>\r\n        </div>\r\n        <div id=\"plays-wrapper\">\r\n          <div id=\"select-wrapper\">\r\n            <SelectBar id=\"players-select\" data={this.state.players} default=\"All Players\" getSelected={this.getSelectedPlayer}/>\r\n            <SelectBar id=\"play-select\" data={this.playTypes} default=\"All Plays\" getSelected={this.getSelectedPlayType}/>\r\n          </div>\r\n          <PlayList plays={this.state.pbp} getSelectedVideoDetails={this.getSelectedVideoDetails}/>\r\n        </div>\r\n      </div>\r\n      );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}