{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _arrays = require('shallow-equal/arrays');\n\nvar _arrays2 = _interopRequireDefault(_arrays);\n\nvar _reactAutowhatever = require('react-autowhatever');\n\nvar _reactAutowhatever2 = _interopRequireDefault(_reactAutowhatever);\n\nvar _theme = require('./theme');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar alwaysTrue = function alwaysTrue() {\n  return true;\n};\n\nvar defaultShouldRenderSuggestions = function defaultShouldRenderSuggestions(value) {\n  return value.trim().length > 0;\n};\n\nvar defaultRenderSuggestionsContainer = function defaultRenderSuggestionsContainer(_ref) {\n  var containerProps = _ref.containerProps,\n      children = _ref.children;\n  return _react2.default.createElement('div', containerProps, children);\n};\n\nvar Autosuggest = function (_Component) {\n  _inherits(Autosuggest, _Component);\n\n  function Autosuggest(_ref2) {\n    var alwaysRenderSuggestions = _ref2.alwaysRenderSuggestions;\n\n    _classCallCheck(this, Autosuggest);\n\n    var _this = _possibleConstructorReturn(this, (Autosuggest.__proto__ || Object.getPrototypeOf(Autosuggest)).call(this));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      isFocused: false,\n      isCollapsed: !alwaysRenderSuggestions,\n      highlightedSectionIndex: null,\n      highlightedSuggestionIndex: null,\n      highlightedSuggestion: null,\n      valueBeforeUpDown: null\n    };\n    _this.justPressedUpDown = false;\n    _this.justMouseEntered = false;\n    _this.pressedSuggestion = null;\n    return _this;\n  }\n\n  _createClass(Autosuggest, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      document.addEventListener('mousedown', this.onDocumentMouseDown);\n      document.addEventListener('mouseup', this.onDocumentMouseUp);\n      this.input = this.autowhatever.input;\n      this.suggestionsContainer = this.autowhatever.itemsContainer;\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if ((0, _arrays2.default)(nextProps.suggestions, this.props.suggestions)) {\n        if (nextProps.highlightFirstSuggestion && nextProps.suggestions.length > 0 && this.justPressedUpDown === false && this.justMouseEntered === false) {\n          this.highlightFirstSuggestion();\n        }\n      } else {\n        if (this.willRenderSuggestions(nextProps)) {\n          if (this.state.isCollapsed && !this.justSelectedSuggestion) {\n            this.revealSuggestions();\n          }\n        } else {\n          this.resetHighlightedSuggestion();\n        }\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _props = this.props,\n          suggestions = _props.suggestions,\n          onSuggestionHighlighted = _props.onSuggestionHighlighted,\n          highlightFirstSuggestion = _props.highlightFirstSuggestion;\n\n      if (!(0, _arrays2.default)(suggestions, prevProps.suggestions) && suggestions.length > 0 && highlightFirstSuggestion) {\n        this.highlightFirstSuggestion();\n        return;\n      }\n\n      if (onSuggestionHighlighted) {\n        var highlightedSuggestion = this.getHighlightedSuggestion();\n        var prevHighlightedSuggestion = prevState.highlightedSuggestion;\n\n        if (highlightedSuggestion != prevHighlightedSuggestion) {\n          onSuggestionHighlighted({\n            suggestion: highlightedSuggestion\n          });\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      document.removeEventListener('mousedown', this.onDocumentMouseDown);\n      document.removeEventListener('mouseup', this.onDocumentMouseUp);\n    }\n  }, {\n    key: 'updateHighlightedSuggestion',\n    value: function updateHighlightedSuggestion(sectionIndex, suggestionIndex, prevValue) {\n      var _this2 = this;\n\n      this.setState(function (state) {\n        var valueBeforeUpDown = state.valueBeforeUpDown;\n\n        if (suggestionIndex === null) {\n          valueBeforeUpDown = null;\n        } else if (valueBeforeUpDown === null && typeof prevValue !== 'undefined') {\n          valueBeforeUpDown = prevValue;\n        }\n\n        return {\n          highlightedSectionIndex: sectionIndex,\n          highlightedSuggestionIndex: suggestionIndex,\n          highlightedSuggestion: suggestionIndex === null ? null : _this2.getSuggestion(sectionIndex, suggestionIndex),\n          valueBeforeUpDown: valueBeforeUpDown\n        };\n      });\n    }\n  }, {\n    key: 'resetHighlightedSuggestion',\n    value: function resetHighlightedSuggestion() {\n      var shouldResetValueBeforeUpDown = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.setState(function (state) {\n        var valueBeforeUpDown = state.valueBeforeUpDown;\n        return {\n          highlightedSectionIndex: null,\n          highlightedSuggestionIndex: null,\n          highlightedSuggestion: null,\n          valueBeforeUpDown: shouldResetValueBeforeUpDown ? null : valueBeforeUpDown\n        };\n      });\n    }\n  }, {\n    key: 'revealSuggestions',\n    value: function revealSuggestions() {\n      this.setState({\n        isCollapsed: false\n      });\n    }\n  }, {\n    key: 'closeSuggestions',\n    value: function closeSuggestions() {\n      this.setState({\n        highlightedSectionIndex: null,\n        highlightedSuggestionIndex: null,\n        highlightedSuggestion: null,\n        valueBeforeUpDown: null,\n        isCollapsed: true\n      });\n    }\n  }, {\n    key: 'getSuggestion',\n    value: function getSuggestion(sectionIndex, suggestionIndex) {\n      var _props2 = this.props,\n          suggestions = _props2.suggestions,\n          multiSection = _props2.multiSection,\n          getSectionSuggestions = _props2.getSectionSuggestions;\n\n      if (multiSection) {\n        return getSectionSuggestions(suggestions[sectionIndex])[suggestionIndex];\n      }\n\n      return suggestions[suggestionIndex];\n    }\n  }, {\n    key: 'getHighlightedSuggestion',\n    value: function getHighlightedSuggestion() {\n      var _state = this.state,\n          highlightedSectionIndex = _state.highlightedSectionIndex,\n          highlightedSuggestionIndex = _state.highlightedSuggestionIndex;\n\n      if (highlightedSuggestionIndex === null) {\n        return null;\n      }\n\n      return this.getSuggestion(highlightedSectionIndex, highlightedSuggestionIndex);\n    }\n  }, {\n    key: 'getSuggestionValueByIndex',\n    value: function getSuggestionValueByIndex(sectionIndex, suggestionIndex) {\n      var getSuggestionValue = this.props.getSuggestionValue;\n      return getSuggestionValue(this.getSuggestion(sectionIndex, suggestionIndex));\n    }\n  }, {\n    key: 'getSuggestionIndices',\n    value: function getSuggestionIndices(suggestionElement) {\n      var sectionIndex = suggestionElement.getAttribute('data-section-index');\n      var suggestionIndex = suggestionElement.getAttribute('data-suggestion-index');\n      return {\n        sectionIndex: typeof sectionIndex === 'string' ? parseInt(sectionIndex, 10) : null,\n        suggestionIndex: parseInt(suggestionIndex, 10)\n      };\n    }\n  }, {\n    key: 'findSuggestionElement',\n    value: function findSuggestionElement(startNode) {\n      var node = startNode;\n\n      do {\n        if (node.getAttribute('data-suggestion-index') !== null) {\n          return node;\n        }\n\n        node = node.parentNode;\n      } while (node !== null);\n\n      console.error('Clicked element:', startNode); // eslint-disable-line no-console\n\n      throw new Error(\"Couldn't find suggestion element\");\n    }\n  }, {\n    key: 'maybeCallOnChange',\n    value: function maybeCallOnChange(event, newValue, method) {\n      var _props$inputProps = this.props.inputProps,\n          value = _props$inputProps.value,\n          onChange = _props$inputProps.onChange;\n\n      if (newValue !== value) {\n        onChange(event, {\n          newValue: newValue,\n          method: method\n        });\n      }\n    }\n  }, {\n    key: 'willRenderSuggestions',\n    value: function willRenderSuggestions(props) {\n      var suggestions = props.suggestions,\n          inputProps = props.inputProps,\n          shouldRenderSuggestions = props.shouldRenderSuggestions;\n      var value = inputProps.value;\n      return suggestions.length > 0 && shouldRenderSuggestions(value);\n    }\n  }, {\n    key: 'getQuery',\n    value: function getQuery() {\n      var inputProps = this.props.inputProps;\n      var value = inputProps.value;\n      var valueBeforeUpDown = this.state.valueBeforeUpDown;\n      return (valueBeforeUpDown === null ? value : valueBeforeUpDown).trim();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var _props3 = this.props,\n          suggestions = _props3.suggestions,\n          renderInputComponent = _props3.renderInputComponent,\n          onSuggestionsFetchRequested = _props3.onSuggestionsFetchRequested,\n          renderSuggestion = _props3.renderSuggestion,\n          inputProps = _props3.inputProps,\n          multiSection = _props3.multiSection,\n          renderSectionTitle = _props3.renderSectionTitle,\n          id = _props3.id,\n          getSectionSuggestions = _props3.getSectionSuggestions,\n          theme = _props3.theme,\n          getSuggestionValue = _props3.getSuggestionValue,\n          alwaysRenderSuggestions = _props3.alwaysRenderSuggestions,\n          highlightFirstSuggestion = _props3.highlightFirstSuggestion;\n      var _state2 = this.state,\n          isFocused = _state2.isFocused,\n          isCollapsed = _state2.isCollapsed,\n          highlightedSectionIndex = _state2.highlightedSectionIndex,\n          highlightedSuggestionIndex = _state2.highlightedSuggestionIndex,\n          valueBeforeUpDown = _state2.valueBeforeUpDown;\n      var shouldRenderSuggestions = alwaysRenderSuggestions ? alwaysTrue : this.props.shouldRenderSuggestions;\n      var value = inputProps.value,\n          _onFocus = inputProps.onFocus,\n          _onKeyDown = inputProps.onKeyDown;\n      var willRenderSuggestions = this.willRenderSuggestions(this.props);\n      var isOpen = alwaysRenderSuggestions || isFocused && !isCollapsed && willRenderSuggestions;\n      var items = isOpen ? suggestions : [];\n\n      var autowhateverInputProps = _extends({}, inputProps, {\n        onFocus: function onFocus(event) {\n          if (!_this3.justSelectedSuggestion && !_this3.justClickedOnSuggestionsContainer) {\n            var shouldRender = shouldRenderSuggestions(value);\n\n            _this3.setState({\n              isFocused: true,\n              isCollapsed: !shouldRender\n            });\n\n            _onFocus && _onFocus(event);\n\n            if (shouldRender) {\n              onSuggestionsFetchRequested({\n                value: value,\n                reason: 'input-focused'\n              });\n            }\n          }\n        },\n        onBlur: function onBlur(event) {\n          if (_this3.justClickedOnSuggestionsContainer) {\n            _this3.input.focus();\n\n            return;\n          }\n\n          _this3.blurEvent = event;\n\n          if (!_this3.justSelectedSuggestion) {\n            _this3.onBlur();\n\n            _this3.onSuggestionsClearRequested();\n          }\n        },\n        onChange: function onChange(event) {\n          var value = event.target.value;\n          var shouldRender = shouldRenderSuggestions(value);\n\n          _this3.maybeCallOnChange(event, value, 'type');\n\n          if (_this3.suggestionsContainer) {\n            _this3.suggestionsContainer.scrollTop = 0;\n          }\n\n          _this3.setState(_extends({}, highlightFirstSuggestion ? {} : {\n            highlightedSectionIndex: null,\n            highlightedSuggestionIndex: null,\n            highlightedSuggestion: null\n          }, {\n            valueBeforeUpDown: null,\n            isCollapsed: !shouldRender\n          }));\n\n          if (shouldRender) {\n            onSuggestionsFetchRequested({\n              value: value,\n              reason: 'input-changed'\n            });\n          } else {\n            _this3.onSuggestionsClearRequested();\n          }\n        },\n        onKeyDown: function onKeyDown(event, data) {\n          var keyCode = event.keyCode;\n\n          switch (keyCode) {\n            case 40: // ArrowDown\n\n            case 38:\n              // ArrowUp\n              if (isCollapsed) {\n                if (shouldRenderSuggestions(value)) {\n                  onSuggestionsFetchRequested({\n                    value: value,\n                    reason: 'suggestions-revealed'\n                  });\n\n                  _this3.revealSuggestions();\n                }\n              } else if (suggestions.length > 0) {\n                var newHighlightedSectionIndex = data.newHighlightedSectionIndex,\n                    newHighlightedItemIndex = data.newHighlightedItemIndex;\n                var newValue = void 0;\n\n                if (newHighlightedItemIndex === null) {\n                  // valueBeforeUpDown can be null if, for example, user\n                  // hovers on the first suggestion and then pressed Up.\n                  // If that happens, use the original input value.\n                  newValue = valueBeforeUpDown === null ? value : valueBeforeUpDown;\n                } else {\n                  newValue = _this3.getSuggestionValueByIndex(newHighlightedSectionIndex, newHighlightedItemIndex);\n                }\n\n                _this3.updateHighlightedSuggestion(newHighlightedSectionIndex, newHighlightedItemIndex, value);\n\n                _this3.maybeCallOnChange(event, newValue, keyCode === 40 ? 'down' : 'up');\n              }\n\n              event.preventDefault(); // Prevents the cursor from moving\n\n              _this3.justPressedUpDown = true;\n              setTimeout(function () {\n                _this3.justPressedUpDown = false;\n              });\n              break;\n            // Enter\n\n            case 13:\n              {\n                // See #388\n                if (event.keyCode === 229) {\n                  break;\n                }\n\n                var highlightedSuggestion = _this3.getHighlightedSuggestion();\n\n                if (isOpen && !alwaysRenderSuggestions) {\n                  _this3.closeSuggestions();\n                }\n\n                if (highlightedSuggestion != null) {\n                  var _newValue = getSuggestionValue(highlightedSuggestion);\n\n                  _this3.maybeCallOnChange(event, _newValue, 'enter');\n\n                  _this3.onSuggestionSelected(event, {\n                    suggestion: highlightedSuggestion,\n                    suggestionValue: _newValue,\n                    suggestionIndex: highlightedSuggestionIndex,\n                    sectionIndex: highlightedSectionIndex,\n                    method: 'enter'\n                  });\n\n                  _this3.justSelectedSuggestion = true;\n                  setTimeout(function () {\n                    _this3.justSelectedSuggestion = false;\n                  });\n                }\n\n                break;\n              }\n            // Escape\n\n            case 27:\n              {\n                if (isOpen) {\n                  // If input.type === 'search', the browser clears the input\n                  // when Escape is pressed. We want to disable this default\n                  // behaviour so that, when suggestions are shown, we just hide\n                  // them, without clearing the input.\n                  event.preventDefault();\n                }\n\n                var willCloseSuggestions = isOpen && !alwaysRenderSuggestions;\n\n                if (valueBeforeUpDown === null) {\n                  // Didn't interact with Up/Down\n                  if (!willCloseSuggestions) {\n                    var _newValue2 = '';\n\n                    _this3.maybeCallOnChange(event, _newValue2, 'escape');\n\n                    if (shouldRenderSuggestions(_newValue2)) {\n                      onSuggestionsFetchRequested({\n                        value: _newValue2,\n                        reason: 'escape-pressed'\n                      });\n                    } else {\n                      _this3.onSuggestionsClearRequested();\n                    }\n                  }\n                } else {\n                  // Interacted with Up/Down\n                  _this3.maybeCallOnChange(event, valueBeforeUpDown, 'escape');\n                }\n\n                if (willCloseSuggestions) {\n                  _this3.onSuggestionsClearRequested();\n\n                  _this3.closeSuggestions();\n                } else {\n                  _this3.resetHighlightedSuggestion();\n                }\n\n                break;\n              }\n          }\n\n          _onKeyDown && _onKeyDown(event);\n        }\n      });\n\n      var renderSuggestionData = {\n        query: this.getQuery()\n      };\n      return _react2.default.createElement(_reactAutowhatever2.default, {\n        multiSection: multiSection,\n        items: items,\n        renderInputComponent: renderInputComponent,\n        renderItemsContainer: this.renderSuggestionsContainer,\n        renderItem: renderSuggestion,\n        renderItemData: renderSuggestionData,\n        renderSectionTitle: renderSectionTitle,\n        getSectionItems: getSectionSuggestions,\n        highlightedSectionIndex: highlightedSectionIndex,\n        highlightedItemIndex: highlightedSuggestionIndex,\n        inputProps: autowhateverInputProps,\n        itemProps: this.itemProps,\n        theme: (0, _theme.mapToAutowhateverTheme)(theme),\n        id: id,\n        ref: this.storeAutowhateverRef\n      });\n    }\n  }]);\n\n  return Autosuggest;\n}(_react.Component);\n\nAutosuggest.propTypes = {\n  suggestions: _propTypes2.default.array.isRequired,\n  onSuggestionsFetchRequested: function onSuggestionsFetchRequested(props, propName) {\n    var onSuggestionsFetchRequested = props[propName];\n\n    if (typeof onSuggestionsFetchRequested !== 'function') {\n      throw new Error(\"'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp\");\n    }\n  },\n  onSuggestionsClearRequested: function onSuggestionsClearRequested(props, propName) {\n    var onSuggestionsClearRequested = props[propName];\n\n    if (props.alwaysRenderSuggestions === false && typeof onSuggestionsClearRequested !== 'function') {\n      throw new Error(\"'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp\");\n    }\n  },\n  onSuggestionSelected: _propTypes2.default.func,\n  onSuggestionHighlighted: _propTypes2.default.func,\n  renderInputComponent: _propTypes2.default.func,\n  renderSuggestionsContainer: _propTypes2.default.func,\n  getSuggestionValue: _propTypes2.default.func.isRequired,\n  renderSuggestion: _propTypes2.default.func.isRequired,\n  inputProps: function inputProps(props, propName) {\n    var inputProps = props[propName];\n\n    if (!inputProps.hasOwnProperty('value')) {\n      throw new Error(\"'inputProps' must have 'value'.\");\n    }\n\n    if (!inputProps.hasOwnProperty('onChange')) {\n      throw new Error(\"'inputProps' must have 'onChange'.\");\n    }\n  },\n  shouldRenderSuggestions: _propTypes2.default.func,\n  alwaysRenderSuggestions: _propTypes2.default.bool,\n  multiSection: _propTypes2.default.bool,\n  renderSectionTitle: function renderSectionTitle(props, propName) {\n    var renderSectionTitle = props[propName];\n\n    if (props.multiSection === true && typeof renderSectionTitle !== 'function') {\n      throw new Error(\"'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp\");\n    }\n  },\n  getSectionSuggestions: function getSectionSuggestions(props, propName) {\n    var getSectionSuggestions = props[propName];\n\n    if (props.multiSection === true && typeof getSectionSuggestions !== 'function') {\n      throw new Error(\"'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp\");\n    }\n  },\n  focusInputOnSuggestionClick: _propTypes2.default.bool,\n  highlightFirstSuggestion: _propTypes2.default.bool,\n  theme: _propTypes2.default.object,\n  id: _propTypes2.default.string\n};\nAutosuggest.defaultProps = {\n  renderSuggestionsContainer: defaultRenderSuggestionsContainer,\n  shouldRenderSuggestions: defaultShouldRenderSuggestions,\n  alwaysRenderSuggestions: false,\n  multiSection: false,\n  focusInputOnSuggestionClick: true,\n  highlightFirstSuggestion: false,\n  theme: _theme.defaultTheme,\n  id: '1'\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.onDocumentMouseDown = function (event) {\n    _this4.justClickedOnSuggestionsContainer = false;\n    var node = event.detail && event.detail.target || // This is for testing only. Please show me a better way to emulate this.\n    event.target;\n\n    while (node !== null && node !== document) {\n      if (node.getAttribute('data-suggestion-index') !== null) {\n        // Suggestion was clicked\n        return;\n      }\n\n      if (node === _this4.suggestionsContainer) {\n        // Something else inside suggestions container was clicked\n        _this4.justClickedOnSuggestionsContainer = true;\n        return;\n      }\n\n      node = node.parentNode;\n    }\n  };\n\n  this.storeAutowhateverRef = function (autowhatever) {\n    if (autowhatever !== null) {\n      _this4.autowhatever = autowhatever;\n    }\n  };\n\n  this.onSuggestionMouseEnter = function (event, _ref3) {\n    var sectionIndex = _ref3.sectionIndex,\n        itemIndex = _ref3.itemIndex;\n\n    _this4.updateHighlightedSuggestion(sectionIndex, itemIndex);\n\n    if (event.target === _this4.pressedSuggestion) {\n      _this4.justSelectedSuggestion = true;\n    }\n\n    _this4.justMouseEntered = true;\n    setTimeout(function () {\n      _this4.justMouseEntered = false;\n    });\n  };\n\n  this.highlightFirstSuggestion = function () {\n    _this4.updateHighlightedSuggestion(_this4.props.multiSection ? 0 : null, 0);\n  };\n\n  this.onDocumentMouseUp = function () {\n    if (_this4.pressedSuggestion && !_this4.justSelectedSuggestion) {\n      _this4.input.focus();\n    }\n\n    _this4.pressedSuggestion = null;\n  };\n\n  this.onSuggestionMouseDown = function (event) {\n    // Checking if this.justSelectedSuggestion is already true to not duplicate touch events in chrome\n    // See: https://github.com/facebook/react/issues/9809#issuecomment-413978405\n    if (!_this4.justSelectedSuggestion) {\n      _this4.justSelectedSuggestion = true;\n      _this4.pressedSuggestion = event.target;\n    }\n  };\n\n  this.onSuggestionsClearRequested = function () {\n    var onSuggestionsClearRequested = _this4.props.onSuggestionsClearRequested;\n    onSuggestionsClearRequested && onSuggestionsClearRequested();\n  };\n\n  this.onSuggestionSelected = function (event, data) {\n    var _props4 = _this4.props,\n        alwaysRenderSuggestions = _props4.alwaysRenderSuggestions,\n        onSuggestionSelected = _props4.onSuggestionSelected,\n        onSuggestionsFetchRequested = _props4.onSuggestionsFetchRequested;\n    onSuggestionSelected && onSuggestionSelected(event, data);\n\n    if (alwaysRenderSuggestions) {\n      onSuggestionsFetchRequested({\n        value: data.suggestionValue,\n        reason: 'suggestion-selected'\n      });\n    } else {\n      _this4.onSuggestionsClearRequested();\n    }\n\n    _this4.resetHighlightedSuggestion();\n  };\n\n  this.onSuggestionClick = function (event) {\n    var _props5 = _this4.props,\n        alwaysRenderSuggestions = _props5.alwaysRenderSuggestions,\n        focusInputOnSuggestionClick = _props5.focusInputOnSuggestionClick;\n\n    var _getSuggestionIndices = _this4.getSuggestionIndices(_this4.findSuggestionElement(event.target)),\n        sectionIndex = _getSuggestionIndices.sectionIndex,\n        suggestionIndex = _getSuggestionIndices.suggestionIndex;\n\n    var clickedSuggestion = _this4.getSuggestion(sectionIndex, suggestionIndex);\n\n    var clickedSuggestionValue = _this4.props.getSuggestionValue(clickedSuggestion);\n\n    _this4.maybeCallOnChange(event, clickedSuggestionValue, 'click');\n\n    _this4.onSuggestionSelected(event, {\n      suggestion: clickedSuggestion,\n      suggestionValue: clickedSuggestionValue,\n      suggestionIndex: suggestionIndex,\n      sectionIndex: sectionIndex,\n      method: 'click'\n    });\n\n    if (!alwaysRenderSuggestions) {\n      _this4.closeSuggestions();\n    }\n\n    if (focusInputOnSuggestionClick === true) {\n      _this4.input.focus();\n    } else {\n      _this4.onBlur();\n    }\n\n    setTimeout(function () {\n      _this4.justSelectedSuggestion = false;\n    });\n  };\n\n  this.onBlur = function () {\n    var _props6 = _this4.props,\n        inputProps = _props6.inputProps,\n        shouldRenderSuggestions = _props6.shouldRenderSuggestions;\n    var value = inputProps.value,\n        onBlur = inputProps.onBlur;\n\n    var highlightedSuggestion = _this4.getHighlightedSuggestion();\n\n    var shouldRender = shouldRenderSuggestions(value);\n\n    _this4.setState({\n      isFocused: false,\n      highlightedSectionIndex: null,\n      highlightedSuggestionIndex: null,\n      highlightedSuggestion: null,\n      valueBeforeUpDown: null,\n      isCollapsed: !shouldRender\n    });\n\n    onBlur && onBlur(_this4.blurEvent, {\n      highlightedSuggestion: highlightedSuggestion\n    });\n  };\n\n  this.onSuggestionMouseLeave = function (event) {\n    _this4.resetHighlightedSuggestion(false); // shouldResetValueBeforeUpDown\n\n\n    if (_this4.justSelectedSuggestion && event.target === _this4.pressedSuggestion) {\n      _this4.justSelectedSuggestion = false;\n    }\n  };\n\n  this.onSuggestionTouchStart = function () {\n    _this4.justSelectedSuggestion = true; // todo: event.preventDefault when https://github.com/facebook/react/issues/2043\n    // todo: gets released so onSuggestionMouseDown won't fire in chrome\n  };\n\n  this.onSuggestionTouchMove = function () {\n    _this4.justSelectedSuggestion = false;\n    _this4.pressedSuggestion = null;\n\n    _this4.input.focus();\n  };\n\n  this.itemProps = function (_ref4) {\n    var sectionIndex = _ref4.sectionIndex,\n        itemIndex = _ref4.itemIndex;\n    return {\n      'data-section-index': sectionIndex,\n      'data-suggestion-index': itemIndex,\n      onMouseEnter: _this4.onSuggestionMouseEnter,\n      onMouseLeave: _this4.onSuggestionMouseLeave,\n      onMouseDown: _this4.onSuggestionMouseDown,\n      onTouchStart: _this4.onSuggestionTouchStart,\n      onTouchMove: _this4.onSuggestionTouchMove,\n      onClick: _this4.onSuggestionClick\n    };\n  };\n\n  this.renderSuggestionsContainer = function (_ref5) {\n    var containerProps = _ref5.containerProps,\n        children = _ref5.children;\n    var renderSuggestionsContainer = _this4.props.renderSuggestionsContainer;\n    return renderSuggestionsContainer({\n      containerProps: containerProps,\n      children: children,\n      query: _this4.getQuery()\n    });\n  };\n};\n\nexports.default = Autosuggest;","map":{"version":3,"sources":["C:/Users/MarvinT/Desktop/stuff/nba-play-viewer-master/node_modules/react-autosuggest/dist/Autosuggest.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_arrays","_arrays2","_reactAutowhatever","_reactAutowhatever2","_theme","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","alwaysTrue","defaultShouldRenderSuggestions","trim","defaultRenderSuggestionsContainer","_ref","containerProps","children","createElement","Autosuggest","_Component","_ref2","alwaysRenderSuggestions","_this","getPrototypeOf","_initialiseProps","state","isFocused","isCollapsed","highlightedSectionIndex","highlightedSuggestionIndex","highlightedSuggestion","valueBeforeUpDown","justPressedUpDown","justMouseEntered","pressedSuggestion","componentDidMount","document","addEventListener","onDocumentMouseDown","onDocumentMouseUp","input","autowhatever","suggestionsContainer","itemsContainer","componentWillReceiveProps","nextProps","suggestions","highlightFirstSuggestion","willRenderSuggestions","justSelectedSuggestion","revealSuggestions","resetHighlightedSuggestion","componentDidUpdate","prevProps","prevState","_props","onSuggestionHighlighted","getHighlightedSuggestion","prevHighlightedSuggestion","suggestion","componentWillUnmount","removeEventListener","updateHighlightedSuggestion","sectionIndex","suggestionIndex","prevValue","_this2","setState","getSuggestion","shouldResetValueBeforeUpDown","undefined","closeSuggestions","_props2","multiSection","getSectionSuggestions","_state","getSuggestionValueByIndex","getSuggestionValue","getSuggestionIndices","suggestionElement","getAttribute","parseInt","findSuggestionElement","startNode","node","parentNode","console","error","Error","maybeCallOnChange","event","newValue","method","_props$inputProps","inputProps","onChange","shouldRenderSuggestions","getQuery","render","_this3","_props3","renderInputComponent","onSuggestionsFetchRequested","renderSuggestion","renderSectionTitle","id","theme","_state2","_onFocus","onFocus","_onKeyDown","onKeyDown","isOpen","items","autowhateverInputProps","justClickedOnSuggestionsContainer","shouldRender","reason","onBlur","focus","blurEvent","onSuggestionsClearRequested","scrollTop","data","keyCode","newHighlightedSectionIndex","newHighlightedItemIndex","preventDefault","setTimeout","_newValue","onSuggestionSelected","suggestionValue","willCloseSuggestions","_newValue2","renderSuggestionData","query","renderItemsContainer","renderSuggestionsContainer","renderItem","renderItemData","getSectionItems","highlightedItemIndex","itemProps","mapToAutowhateverTheme","ref","storeAutowhateverRef","Component","propTypes","array","isRequired","propName","func","bool","focusInputOnSuggestionClick","object","string","defaultProps","defaultTheme","_this4","detail","onSuggestionMouseEnter","_ref3","itemIndex","onSuggestionMouseDown","_props4","onSuggestionClick","_props5","_getSuggestionIndices","clickedSuggestion","clickedSuggestionValue","_props6","onSuggestionMouseLeave","onSuggestionTouchStart","onSuggestionTouchMove","_ref4","onMouseEnter","onMouseLeave","onMouseDown","onTouchStart","onTouchMove","onClick","_ref5"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _arrays = require('shallow-equal/arrays');\n\nvar _arrays2 = _interopRequireDefault(_arrays);\n\nvar _reactAutowhatever = require('react-autowhatever');\n\nvar _reactAutowhatever2 = _interopRequireDefault(_reactAutowhatever);\n\nvar _theme = require('./theme');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar alwaysTrue = function alwaysTrue() {\n  return true;\n};\nvar defaultShouldRenderSuggestions = function defaultShouldRenderSuggestions(value) {\n  return value.trim().length > 0;\n};\nvar defaultRenderSuggestionsContainer = function defaultRenderSuggestionsContainer(_ref) {\n  var containerProps = _ref.containerProps,\n      children = _ref.children;\n  return _react2.default.createElement(\n    'div',\n    containerProps,\n    children\n  );\n};\n\nvar Autosuggest = function (_Component) {\n  _inherits(Autosuggest, _Component);\n\n  function Autosuggest(_ref2) {\n    var alwaysRenderSuggestions = _ref2.alwaysRenderSuggestions;\n\n    _classCallCheck(this, Autosuggest);\n\n    var _this = _possibleConstructorReturn(this, (Autosuggest.__proto__ || Object.getPrototypeOf(Autosuggest)).call(this));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      isFocused: false,\n      isCollapsed: !alwaysRenderSuggestions,\n      highlightedSectionIndex: null,\n      highlightedSuggestionIndex: null,\n      highlightedSuggestion: null,\n      valueBeforeUpDown: null\n    };\n\n    _this.justPressedUpDown = false;\n    _this.justMouseEntered = false;\n\n    _this.pressedSuggestion = null;\n    return _this;\n  }\n\n  _createClass(Autosuggest, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      document.addEventListener('mousedown', this.onDocumentMouseDown);\n      document.addEventListener('mouseup', this.onDocumentMouseUp);\n\n      this.input = this.autowhatever.input;\n      this.suggestionsContainer = this.autowhatever.itemsContainer;\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if ((0, _arrays2.default)(nextProps.suggestions, this.props.suggestions)) {\n        if (nextProps.highlightFirstSuggestion && nextProps.suggestions.length > 0 && this.justPressedUpDown === false && this.justMouseEntered === false) {\n          this.highlightFirstSuggestion();\n        }\n      } else {\n        if (this.willRenderSuggestions(nextProps)) {\n          if (this.state.isCollapsed && !this.justSelectedSuggestion) {\n            this.revealSuggestions();\n          }\n        } else {\n          this.resetHighlightedSuggestion();\n        }\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _props = this.props,\n          suggestions = _props.suggestions,\n          onSuggestionHighlighted = _props.onSuggestionHighlighted,\n          highlightFirstSuggestion = _props.highlightFirstSuggestion;\n\n\n      if (!(0, _arrays2.default)(suggestions, prevProps.suggestions) && suggestions.length > 0 && highlightFirstSuggestion) {\n        this.highlightFirstSuggestion();\n        return;\n      }\n\n      if (onSuggestionHighlighted) {\n        var highlightedSuggestion = this.getHighlightedSuggestion();\n        var prevHighlightedSuggestion = prevState.highlightedSuggestion;\n\n        if (highlightedSuggestion != prevHighlightedSuggestion) {\n          onSuggestionHighlighted({\n            suggestion: highlightedSuggestion\n          });\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      document.removeEventListener('mousedown', this.onDocumentMouseDown);\n      document.removeEventListener('mouseup', this.onDocumentMouseUp);\n    }\n  }, {\n    key: 'updateHighlightedSuggestion',\n    value: function updateHighlightedSuggestion(sectionIndex, suggestionIndex, prevValue) {\n      var _this2 = this;\n\n      this.setState(function (state) {\n        var valueBeforeUpDown = state.valueBeforeUpDown;\n\n\n        if (suggestionIndex === null) {\n          valueBeforeUpDown = null;\n        } else if (valueBeforeUpDown === null && typeof prevValue !== 'undefined') {\n          valueBeforeUpDown = prevValue;\n        }\n\n        return {\n          highlightedSectionIndex: sectionIndex,\n          highlightedSuggestionIndex: suggestionIndex,\n          highlightedSuggestion: suggestionIndex === null ? null : _this2.getSuggestion(sectionIndex, suggestionIndex),\n          valueBeforeUpDown: valueBeforeUpDown\n        };\n      });\n    }\n  }, {\n    key: 'resetHighlightedSuggestion',\n    value: function resetHighlightedSuggestion() {\n      var shouldResetValueBeforeUpDown = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.setState(function (state) {\n        var valueBeforeUpDown = state.valueBeforeUpDown;\n\n\n        return {\n          highlightedSectionIndex: null,\n          highlightedSuggestionIndex: null,\n          highlightedSuggestion: null,\n          valueBeforeUpDown: shouldResetValueBeforeUpDown ? null : valueBeforeUpDown\n        };\n      });\n    }\n  }, {\n    key: 'revealSuggestions',\n    value: function revealSuggestions() {\n      this.setState({\n        isCollapsed: false\n      });\n    }\n  }, {\n    key: 'closeSuggestions',\n    value: function closeSuggestions() {\n      this.setState({\n        highlightedSectionIndex: null,\n        highlightedSuggestionIndex: null,\n        highlightedSuggestion: null,\n        valueBeforeUpDown: null,\n        isCollapsed: true\n      });\n    }\n  }, {\n    key: 'getSuggestion',\n    value: function getSuggestion(sectionIndex, suggestionIndex) {\n      var _props2 = this.props,\n          suggestions = _props2.suggestions,\n          multiSection = _props2.multiSection,\n          getSectionSuggestions = _props2.getSectionSuggestions;\n\n\n      if (multiSection) {\n        return getSectionSuggestions(suggestions[sectionIndex])[suggestionIndex];\n      }\n\n      return suggestions[suggestionIndex];\n    }\n  }, {\n    key: 'getHighlightedSuggestion',\n    value: function getHighlightedSuggestion() {\n      var _state = this.state,\n          highlightedSectionIndex = _state.highlightedSectionIndex,\n          highlightedSuggestionIndex = _state.highlightedSuggestionIndex;\n\n\n      if (highlightedSuggestionIndex === null) {\n        return null;\n      }\n\n      return this.getSuggestion(highlightedSectionIndex, highlightedSuggestionIndex);\n    }\n  }, {\n    key: 'getSuggestionValueByIndex',\n    value: function getSuggestionValueByIndex(sectionIndex, suggestionIndex) {\n      var getSuggestionValue = this.props.getSuggestionValue;\n\n\n      return getSuggestionValue(this.getSuggestion(sectionIndex, suggestionIndex));\n    }\n  }, {\n    key: 'getSuggestionIndices',\n    value: function getSuggestionIndices(suggestionElement) {\n      var sectionIndex = suggestionElement.getAttribute('data-section-index');\n      var suggestionIndex = suggestionElement.getAttribute('data-suggestion-index');\n\n      return {\n        sectionIndex: typeof sectionIndex === 'string' ? parseInt(sectionIndex, 10) : null,\n        suggestionIndex: parseInt(suggestionIndex, 10)\n      };\n    }\n  }, {\n    key: 'findSuggestionElement',\n    value: function findSuggestionElement(startNode) {\n      var node = startNode;\n\n      do {\n        if (node.getAttribute('data-suggestion-index') !== null) {\n          return node;\n        }\n\n        node = node.parentNode;\n      } while (node !== null);\n\n      console.error('Clicked element:', startNode); // eslint-disable-line no-console\n      throw new Error(\"Couldn't find suggestion element\");\n    }\n  }, {\n    key: 'maybeCallOnChange',\n    value: function maybeCallOnChange(event, newValue, method) {\n      var _props$inputProps = this.props.inputProps,\n          value = _props$inputProps.value,\n          onChange = _props$inputProps.onChange;\n\n\n      if (newValue !== value) {\n        onChange(event, { newValue: newValue, method: method });\n      }\n    }\n  }, {\n    key: 'willRenderSuggestions',\n    value: function willRenderSuggestions(props) {\n      var suggestions = props.suggestions,\n          inputProps = props.inputProps,\n          shouldRenderSuggestions = props.shouldRenderSuggestions;\n      var value = inputProps.value;\n\n\n      return suggestions.length > 0 && shouldRenderSuggestions(value);\n    }\n  }, {\n    key: 'getQuery',\n    value: function getQuery() {\n      var inputProps = this.props.inputProps;\n      var value = inputProps.value;\n      var valueBeforeUpDown = this.state.valueBeforeUpDown;\n\n\n      return (valueBeforeUpDown === null ? value : valueBeforeUpDown).trim();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var _props3 = this.props,\n          suggestions = _props3.suggestions,\n          renderInputComponent = _props3.renderInputComponent,\n          onSuggestionsFetchRequested = _props3.onSuggestionsFetchRequested,\n          renderSuggestion = _props3.renderSuggestion,\n          inputProps = _props3.inputProps,\n          multiSection = _props3.multiSection,\n          renderSectionTitle = _props3.renderSectionTitle,\n          id = _props3.id,\n          getSectionSuggestions = _props3.getSectionSuggestions,\n          theme = _props3.theme,\n          getSuggestionValue = _props3.getSuggestionValue,\n          alwaysRenderSuggestions = _props3.alwaysRenderSuggestions,\n          highlightFirstSuggestion = _props3.highlightFirstSuggestion;\n      var _state2 = this.state,\n          isFocused = _state2.isFocused,\n          isCollapsed = _state2.isCollapsed,\n          highlightedSectionIndex = _state2.highlightedSectionIndex,\n          highlightedSuggestionIndex = _state2.highlightedSuggestionIndex,\n          valueBeforeUpDown = _state2.valueBeforeUpDown;\n\n      var shouldRenderSuggestions = alwaysRenderSuggestions ? alwaysTrue : this.props.shouldRenderSuggestions;\n      var value = inputProps.value,\n          _onFocus = inputProps.onFocus,\n          _onKeyDown = inputProps.onKeyDown;\n\n      var willRenderSuggestions = this.willRenderSuggestions(this.props);\n      var isOpen = alwaysRenderSuggestions || isFocused && !isCollapsed && willRenderSuggestions;\n      var items = isOpen ? suggestions : [];\n      var autowhateverInputProps = _extends({}, inputProps, {\n        onFocus: function onFocus(event) {\n          if (!_this3.justSelectedSuggestion && !_this3.justClickedOnSuggestionsContainer) {\n            var shouldRender = shouldRenderSuggestions(value);\n\n            _this3.setState({\n              isFocused: true,\n              isCollapsed: !shouldRender\n            });\n\n            _onFocus && _onFocus(event);\n\n            if (shouldRender) {\n              onSuggestionsFetchRequested({ value: value, reason: 'input-focused' });\n            }\n          }\n        },\n        onBlur: function onBlur(event) {\n          if (_this3.justClickedOnSuggestionsContainer) {\n            _this3.input.focus();\n            return;\n          }\n\n          _this3.blurEvent = event;\n\n          if (!_this3.justSelectedSuggestion) {\n            _this3.onBlur();\n            _this3.onSuggestionsClearRequested();\n          }\n        },\n        onChange: function onChange(event) {\n          var value = event.target.value;\n\n          var shouldRender = shouldRenderSuggestions(value);\n\n          _this3.maybeCallOnChange(event, value, 'type');\n\n          if (_this3.suggestionsContainer) {\n            _this3.suggestionsContainer.scrollTop = 0;\n          }\n\n          _this3.setState(_extends({}, highlightFirstSuggestion ? {} : {\n            highlightedSectionIndex: null,\n            highlightedSuggestionIndex: null,\n            highlightedSuggestion: null\n          }, {\n            valueBeforeUpDown: null,\n            isCollapsed: !shouldRender\n          }));\n\n          if (shouldRender) {\n            onSuggestionsFetchRequested({ value: value, reason: 'input-changed' });\n          } else {\n            _this3.onSuggestionsClearRequested();\n          }\n        },\n        onKeyDown: function onKeyDown(event, data) {\n          var keyCode = event.keyCode;\n\n\n          switch (keyCode) {\n            case 40: // ArrowDown\n            case 38:\n              // ArrowUp\n              if (isCollapsed) {\n                if (shouldRenderSuggestions(value)) {\n                  onSuggestionsFetchRequested({\n                    value: value,\n                    reason: 'suggestions-revealed'\n                  });\n                  _this3.revealSuggestions();\n                }\n              } else if (suggestions.length > 0) {\n                var newHighlightedSectionIndex = data.newHighlightedSectionIndex,\n                    newHighlightedItemIndex = data.newHighlightedItemIndex;\n\n\n                var newValue = void 0;\n\n                if (newHighlightedItemIndex === null) {\n                  // valueBeforeUpDown can be null if, for example, user\n                  // hovers on the first suggestion and then pressed Up.\n                  // If that happens, use the original input value.\n                  newValue = valueBeforeUpDown === null ? value : valueBeforeUpDown;\n                } else {\n                  newValue = _this3.getSuggestionValueByIndex(newHighlightedSectionIndex, newHighlightedItemIndex);\n                }\n\n                _this3.updateHighlightedSuggestion(newHighlightedSectionIndex, newHighlightedItemIndex, value);\n                _this3.maybeCallOnChange(event, newValue, keyCode === 40 ? 'down' : 'up');\n              }\n\n              event.preventDefault(); // Prevents the cursor from moving\n\n              _this3.justPressedUpDown = true;\n\n              setTimeout(function () {\n                _this3.justPressedUpDown = false;\n              });\n\n              break;\n\n            // Enter\n            case 13:\n              {\n                // See #388\n                if (event.keyCode === 229) {\n                  break;\n                }\n\n                var highlightedSuggestion = _this3.getHighlightedSuggestion();\n\n                if (isOpen && !alwaysRenderSuggestions) {\n                  _this3.closeSuggestions();\n                }\n\n                if (highlightedSuggestion != null) {\n                  var _newValue = getSuggestionValue(highlightedSuggestion);\n\n                  _this3.maybeCallOnChange(event, _newValue, 'enter');\n\n                  _this3.onSuggestionSelected(event, {\n                    suggestion: highlightedSuggestion,\n                    suggestionValue: _newValue,\n                    suggestionIndex: highlightedSuggestionIndex,\n                    sectionIndex: highlightedSectionIndex,\n                    method: 'enter'\n                  });\n\n                  _this3.justSelectedSuggestion = true;\n\n                  setTimeout(function () {\n                    _this3.justSelectedSuggestion = false;\n                  });\n                }\n\n                break;\n              }\n\n            // Escape\n            case 27:\n              {\n                if (isOpen) {\n                  // If input.type === 'search', the browser clears the input\n                  // when Escape is pressed. We want to disable this default\n                  // behaviour so that, when suggestions are shown, we just hide\n                  // them, without clearing the input.\n                  event.preventDefault();\n                }\n\n                var willCloseSuggestions = isOpen && !alwaysRenderSuggestions;\n\n                if (valueBeforeUpDown === null) {\n                  // Didn't interact with Up/Down\n                  if (!willCloseSuggestions) {\n                    var _newValue2 = '';\n\n                    _this3.maybeCallOnChange(event, _newValue2, 'escape');\n\n                    if (shouldRenderSuggestions(_newValue2)) {\n                      onSuggestionsFetchRequested({\n                        value: _newValue2,\n                        reason: 'escape-pressed'\n                      });\n                    } else {\n                      _this3.onSuggestionsClearRequested();\n                    }\n                  }\n                } else {\n                  // Interacted with Up/Down\n                  _this3.maybeCallOnChange(event, valueBeforeUpDown, 'escape');\n                }\n\n                if (willCloseSuggestions) {\n                  _this3.onSuggestionsClearRequested();\n                  _this3.closeSuggestions();\n                } else {\n                  _this3.resetHighlightedSuggestion();\n                }\n\n                break;\n              }\n          }\n\n          _onKeyDown && _onKeyDown(event);\n        }\n      });\n      var renderSuggestionData = {\n        query: this.getQuery()\n      };\n\n      return _react2.default.createElement(_reactAutowhatever2.default, {\n        multiSection: multiSection,\n        items: items,\n        renderInputComponent: renderInputComponent,\n        renderItemsContainer: this.renderSuggestionsContainer,\n        renderItem: renderSuggestion,\n        renderItemData: renderSuggestionData,\n        renderSectionTitle: renderSectionTitle,\n        getSectionItems: getSectionSuggestions,\n        highlightedSectionIndex: highlightedSectionIndex,\n        highlightedItemIndex: highlightedSuggestionIndex,\n        inputProps: autowhateverInputProps,\n        itemProps: this.itemProps,\n        theme: (0, _theme.mapToAutowhateverTheme)(theme),\n        id: id,\n        ref: this.storeAutowhateverRef\n      });\n    }\n  }]);\n\n  return Autosuggest;\n}(_react.Component);\n\nAutosuggest.propTypes = {\n  suggestions: _propTypes2.default.array.isRequired,\n  onSuggestionsFetchRequested: function onSuggestionsFetchRequested(props, propName) {\n    var onSuggestionsFetchRequested = props[propName];\n\n    if (typeof onSuggestionsFetchRequested !== 'function') {\n      throw new Error(\"'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp\");\n    }\n  },\n  onSuggestionsClearRequested: function onSuggestionsClearRequested(props, propName) {\n    var onSuggestionsClearRequested = props[propName];\n\n    if (props.alwaysRenderSuggestions === false && typeof onSuggestionsClearRequested !== 'function') {\n      throw new Error(\"'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp\");\n    }\n  },\n  onSuggestionSelected: _propTypes2.default.func,\n  onSuggestionHighlighted: _propTypes2.default.func,\n  renderInputComponent: _propTypes2.default.func,\n  renderSuggestionsContainer: _propTypes2.default.func,\n  getSuggestionValue: _propTypes2.default.func.isRequired,\n  renderSuggestion: _propTypes2.default.func.isRequired,\n  inputProps: function inputProps(props, propName) {\n    var inputProps = props[propName];\n\n    if (!inputProps.hasOwnProperty('value')) {\n      throw new Error(\"'inputProps' must have 'value'.\");\n    }\n\n    if (!inputProps.hasOwnProperty('onChange')) {\n      throw new Error(\"'inputProps' must have 'onChange'.\");\n    }\n  },\n  shouldRenderSuggestions: _propTypes2.default.func,\n  alwaysRenderSuggestions: _propTypes2.default.bool,\n  multiSection: _propTypes2.default.bool,\n  renderSectionTitle: function renderSectionTitle(props, propName) {\n    var renderSectionTitle = props[propName];\n\n    if (props.multiSection === true && typeof renderSectionTitle !== 'function') {\n      throw new Error(\"'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp\");\n    }\n  },\n  getSectionSuggestions: function getSectionSuggestions(props, propName) {\n    var getSectionSuggestions = props[propName];\n\n    if (props.multiSection === true && typeof getSectionSuggestions !== 'function') {\n      throw new Error(\"'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp\");\n    }\n  },\n  focusInputOnSuggestionClick: _propTypes2.default.bool,\n  highlightFirstSuggestion: _propTypes2.default.bool,\n  theme: _propTypes2.default.object,\n  id: _propTypes2.default.string\n};\nAutosuggest.defaultProps = {\n  renderSuggestionsContainer: defaultRenderSuggestionsContainer,\n  shouldRenderSuggestions: defaultShouldRenderSuggestions,\n  alwaysRenderSuggestions: false,\n  multiSection: false,\n  focusInputOnSuggestionClick: true,\n  highlightFirstSuggestion: false,\n  theme: _theme.defaultTheme,\n  id: '1'\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.onDocumentMouseDown = function (event) {\n    _this4.justClickedOnSuggestionsContainer = false;\n\n    var node = event.detail && event.detail.target || // This is for testing only. Please show me a better way to emulate this.\n    event.target;\n\n    while (node !== null && node !== document) {\n      if (node.getAttribute('data-suggestion-index') !== null) {\n        // Suggestion was clicked\n        return;\n      }\n\n      if (node === _this4.suggestionsContainer) {\n        // Something else inside suggestions container was clicked\n        _this4.justClickedOnSuggestionsContainer = true;\n        return;\n      }\n\n      node = node.parentNode;\n    }\n  };\n\n  this.storeAutowhateverRef = function (autowhatever) {\n    if (autowhatever !== null) {\n      _this4.autowhatever = autowhatever;\n    }\n  };\n\n  this.onSuggestionMouseEnter = function (event, _ref3) {\n    var sectionIndex = _ref3.sectionIndex,\n        itemIndex = _ref3.itemIndex;\n\n    _this4.updateHighlightedSuggestion(sectionIndex, itemIndex);\n\n    if (event.target === _this4.pressedSuggestion) {\n      _this4.justSelectedSuggestion = true;\n    }\n\n    _this4.justMouseEntered = true;\n\n    setTimeout(function () {\n      _this4.justMouseEntered = false;\n    });\n  };\n\n  this.highlightFirstSuggestion = function () {\n    _this4.updateHighlightedSuggestion(_this4.props.multiSection ? 0 : null, 0);\n  };\n\n  this.onDocumentMouseUp = function () {\n    if (_this4.pressedSuggestion && !_this4.justSelectedSuggestion) {\n      _this4.input.focus();\n    }\n    _this4.pressedSuggestion = null;\n  };\n\n  this.onSuggestionMouseDown = function (event) {\n    // Checking if this.justSelectedSuggestion is already true to not duplicate touch events in chrome\n    // See: https://github.com/facebook/react/issues/9809#issuecomment-413978405\n    if (!_this4.justSelectedSuggestion) {\n      _this4.justSelectedSuggestion = true;\n      _this4.pressedSuggestion = event.target;\n    }\n  };\n\n  this.onSuggestionsClearRequested = function () {\n    var onSuggestionsClearRequested = _this4.props.onSuggestionsClearRequested;\n\n\n    onSuggestionsClearRequested && onSuggestionsClearRequested();\n  };\n\n  this.onSuggestionSelected = function (event, data) {\n    var _props4 = _this4.props,\n        alwaysRenderSuggestions = _props4.alwaysRenderSuggestions,\n        onSuggestionSelected = _props4.onSuggestionSelected,\n        onSuggestionsFetchRequested = _props4.onSuggestionsFetchRequested;\n\n\n    onSuggestionSelected && onSuggestionSelected(event, data);\n\n    if (alwaysRenderSuggestions) {\n      onSuggestionsFetchRequested({\n        value: data.suggestionValue,\n        reason: 'suggestion-selected'\n      });\n    } else {\n      _this4.onSuggestionsClearRequested();\n    }\n\n    _this4.resetHighlightedSuggestion();\n  };\n\n  this.onSuggestionClick = function (event) {\n    var _props5 = _this4.props,\n        alwaysRenderSuggestions = _props5.alwaysRenderSuggestions,\n        focusInputOnSuggestionClick = _props5.focusInputOnSuggestionClick;\n\n    var _getSuggestionIndices = _this4.getSuggestionIndices(_this4.findSuggestionElement(event.target)),\n        sectionIndex = _getSuggestionIndices.sectionIndex,\n        suggestionIndex = _getSuggestionIndices.suggestionIndex;\n\n    var clickedSuggestion = _this4.getSuggestion(sectionIndex, suggestionIndex);\n    var clickedSuggestionValue = _this4.props.getSuggestionValue(clickedSuggestion);\n\n    _this4.maybeCallOnChange(event, clickedSuggestionValue, 'click');\n    _this4.onSuggestionSelected(event, {\n      suggestion: clickedSuggestion,\n      suggestionValue: clickedSuggestionValue,\n      suggestionIndex: suggestionIndex,\n      sectionIndex: sectionIndex,\n      method: 'click'\n    });\n\n    if (!alwaysRenderSuggestions) {\n      _this4.closeSuggestions();\n    }\n\n    if (focusInputOnSuggestionClick === true) {\n      _this4.input.focus();\n    } else {\n      _this4.onBlur();\n    }\n\n    setTimeout(function () {\n      _this4.justSelectedSuggestion = false;\n    });\n  };\n\n  this.onBlur = function () {\n    var _props6 = _this4.props,\n        inputProps = _props6.inputProps,\n        shouldRenderSuggestions = _props6.shouldRenderSuggestions;\n    var value = inputProps.value,\n        onBlur = inputProps.onBlur;\n\n    var highlightedSuggestion = _this4.getHighlightedSuggestion();\n    var shouldRender = shouldRenderSuggestions(value);\n\n    _this4.setState({\n      isFocused: false,\n      highlightedSectionIndex: null,\n      highlightedSuggestionIndex: null,\n      highlightedSuggestion: null,\n      valueBeforeUpDown: null,\n      isCollapsed: !shouldRender\n    });\n\n    onBlur && onBlur(_this4.blurEvent, { highlightedSuggestion: highlightedSuggestion });\n  };\n\n  this.onSuggestionMouseLeave = function (event) {\n    _this4.resetHighlightedSuggestion(false); // shouldResetValueBeforeUpDown\n\n    if (_this4.justSelectedSuggestion && event.target === _this4.pressedSuggestion) {\n      _this4.justSelectedSuggestion = false;\n    }\n  };\n\n  this.onSuggestionTouchStart = function () {\n    _this4.justSelectedSuggestion = true;\n    // todo: event.preventDefault when https://github.com/facebook/react/issues/2043\n    // todo: gets released so onSuggestionMouseDown won't fire in chrome\n  };\n\n  this.onSuggestionTouchMove = function () {\n    _this4.justSelectedSuggestion = false;\n    _this4.pressedSuggestion = null;\n    _this4.input.focus();\n  };\n\n  this.itemProps = function (_ref4) {\n    var sectionIndex = _ref4.sectionIndex,\n        itemIndex = _ref4.itemIndex;\n\n    return {\n      'data-section-index': sectionIndex,\n      'data-suggestion-index': itemIndex,\n      onMouseEnter: _this4.onSuggestionMouseEnter,\n      onMouseLeave: _this4.onSuggestionMouseLeave,\n      onMouseDown: _this4.onSuggestionMouseDown,\n      onTouchStart: _this4.onSuggestionTouchStart,\n      onTouchMove: _this4.onSuggestionTouchMove,\n      onClick: _this4.onSuggestionClick\n    };\n  };\n\n  this.renderSuggestionsContainer = function (_ref5) {\n    var containerProps = _ref5.containerProps,\n        children = _ref5.children;\n    var renderSuggestionsContainer = _this4.props.renderSuggestionsContainer;\n\n\n    return renderSuggestionsContainer({\n      containerProps: containerProps,\n      children: children,\n      query: _this4.getQuery()\n    });\n  };\n};\n\nexports.default = Autosuggest;"]},"metadata":{},"sourceType":"script"}